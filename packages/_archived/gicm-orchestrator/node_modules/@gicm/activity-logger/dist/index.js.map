{"version":3,"sources":["../src/logger.ts","../src/types.ts"],"sourcesContent":["import { SQLiteDB } from \"./db/sqlite.js\";\nimport { SolanaMemoLogger } from \"./solana/memo-logger.js\";\nimport { ArweaveUploader } from \"./arweave/irys-uploader.js\";\nimport type {\n  Activity,\n  ActivityLoggerConfig,\n  ActivityType,\n  CreateActivityInput,\n  CreateDecisionInput,\n  CreateDiscoveryInput,\n  Decision,\n  Discovery,\n} from \"./types.js\";\n\nconst DEFAULT_IMMEDIATE_TYPES: ActivityType[] = [\n  \"decision\",\n  \"deployment\",\n  \"approval\",\n];\n\nexport class ActivityLogger {\n  private db: SQLiteDB;\n  private solana: SolanaMemoLogger | null = null;\n  private arweave: ArweaveUploader | null = null;\n  private config: ActivityLoggerConfig;\n  private immediateTypes: ActivityType[];\n  private flushInterval: NodeJS.Timeout | null = null;\n\n  constructor(config: ActivityLoggerConfig = {}) {\n    this.config = config;\n    this.db = new SQLiteDB(config.dbPath);\n    this.immediateTypes = config.immediateTypes ?? DEFAULT_IMMEDIATE_TYPES;\n\n    if (config.solana) {\n      this.solana = new SolanaMemoLogger({\n        rpcUrl: config.solana.rpcUrl,\n        privateKey: config.solana.privateKey,\n        commitment: config.solana.commitment,\n      });\n    }\n\n    if (config.arweave || config.solana) {\n      // Arweave uses the same Solana credentials\n      this.arweave = new ArweaveUploader({\n        solanaRpcUrl: config.solana?.rpcUrl ?? \"https://api.mainnet-beta.solana.com\",\n        solanaPrivateKey: config.solana?.privateKey ?? \"\",\n        gatewayUrl: config.arweave?.gatewayUrl,\n        minPayloadSize: config.arweave?.minPayloadSize,\n      });\n    }\n\n    // Start background sync if on-chain is enabled\n    if (this.solana || this.arweave) {\n      this.startBackgroundSync();\n    }\n  }\n\n  // Activity logging\n  async logActivity(\n    input: CreateActivityInput,\n    options?: {\n      discovery?: CreateDiscoveryInput;\n      decision?: CreateDecisionInput;\n      immediate?: boolean;\n    }\n  ): Promise<{\n    activity: Activity;\n    discovery?: Discovery;\n    decision?: Decision;\n  }> {\n    // Create activity in database\n    const activity = this.db.createActivity(input);\n\n    // Create related records if provided\n    let discovery: Discovery | undefined;\n    let decision: Decision | undefined;\n\n    if (options?.discovery) {\n      discovery = this.db.createDiscovery(activity.id, options.discovery);\n    }\n\n    if (options?.decision) {\n      decision = this.db.createDecision(activity.id, options.decision);\n      if (discovery) {\n        this.db.markDiscoveryAnalyzed(discovery.id, decision.id);\n      }\n    }\n\n    // Determine if we should sync immediately\n    const shouldSyncImmediately =\n      options?.immediate ?? this.immediateTypes.includes(input.type);\n\n    if (shouldSyncImmediately && (this.solana || this.arweave)) {\n      await this.syncActivity(activity, discovery, decision);\n    } else if (this.solana || this.arweave) {\n      // Queue for batch sync\n      this.queueForSync(activity);\n    }\n\n    return { activity, discovery, decision };\n  }\n\n  // Sync a single activity to on-chain\n  private async syncActivity(\n    activity: Activity,\n    discovery?: Discovery,\n    decision?: Decision\n  ): Promise<void> {\n    let solanaTxHash: string | undefined;\n    let arweaveTxId: string | undefined;\n\n    try {\n      // Upload to Arweave first (if enabled)\n      if (this.arweave) {\n        const arweaveResult = await this.arweave.uploadActivity(activity, {\n          discovery,\n          decision,\n        });\n        arweaveTxId = arweaveResult.txId;\n      }\n\n      // Log to Solana (if enabled)\n      if (this.solana) {\n        const solanaResult = await this.solana.logActivity(\n          activity,\n          arweaveTxId\n        );\n        solanaTxHash = solanaResult.signature;\n      }\n\n      // Update activity with on-chain references\n      this.db.updateActivity(activity.id, {\n        solanaTxHash,\n        arweaveTxId,\n      });\n    } catch (error) {\n      console.error(`[ActivityLogger] Failed to sync activity ${activity.id}:`, error);\n      // Queue for retry\n      this.queueForSync(activity);\n    }\n  }\n\n  private queueForSync(activity: Activity): void {\n    if (this.solana) {\n      this.db.enqueueSyncItem(\n        activity.id,\n        \"solana\",\n        activity,\n        this.getPriority(activity.type)\n      );\n    }\n    if (this.arweave) {\n      this.db.enqueueSyncItem(\n        activity.id,\n        \"arweave\",\n        activity,\n        this.getPriority(activity.type)\n      );\n    }\n  }\n\n  private getPriority(type: ActivityType): number {\n    const priorities: Record<ActivityType, number> = {\n      decision: 3,\n      deployment: 3,\n      approval: 3,\n      build: 2,\n      discovery: 1,\n      error: 2,\n    };\n    return priorities[type] ?? 1;\n  }\n\n  private startBackgroundSync(): void {\n    const interval = this.config.flushInterval ?? 60000; // 1 minute default\n\n    this.flushInterval = setInterval(async () => {\n      await this.processSyncQueue();\n    }, interval);\n  }\n\n  private async processSyncQueue(): Promise<void> {\n    const batchSize = this.config.batchSize ?? 10;\n\n    // Process Solana queue\n    if (this.solana) {\n      const solanaItems = this.db.getNextSyncItems(\"solana\", batchSize);\n      for (const item of solanaItems) {\n        try {\n          this.db.updateSyncItemStatus(item.id, \"processing\");\n          const activity = this.db.getActivity(item.activityId);\n          if (activity) {\n            const result = await this.solana.logActivity(activity);\n            this.db.updateActivity(activity.id, {\n              solanaTxHash: result.signature,\n            });\n            this.db.updateSyncItemStatus(item.id, \"completed\");\n          }\n        } catch (error) {\n          const message = error instanceof Error ? error.message : \"Unknown error\";\n          this.db.updateSyncItemStatus(item.id, \"failed\", message);\n        }\n      }\n    }\n\n    // Process Arweave queue\n    if (this.arweave) {\n      const arweaveItems = this.db.getNextSyncItems(\"arweave\", batchSize);\n      if (arweaveItems.length > 0) {\n        try {\n          // Batch upload for efficiency\n          const activities = arweaveItems\n            .map((item) => {\n              const activity = this.db.getActivity(item.activityId);\n              return activity ? { activity } : null;\n            })\n            .filter((a): a is { activity: Activity } => a !== null);\n\n          if (activities.length > 0) {\n            const result = await this.arweave.uploadBatch(activities);\n\n            // Mark all items as completed\n            for (const item of arweaveItems) {\n              this.db.updateSyncItemStatus(item.id, \"completed\");\n              this.db.updateActivity(item.activityId, {\n                arweaveTxId: result.txId,\n              });\n            }\n          }\n        } catch (error) {\n          const message = error instanceof Error ? error.message : \"Unknown error\";\n          for (const item of arweaveItems) {\n            this.db.updateSyncItemStatus(item.id, \"failed\", message);\n          }\n        }\n      }\n    }\n  }\n\n  // Discovery methods\n  createDiscovery(activityId: string, input: CreateDiscoveryInput): Discovery {\n    return this.db.createDiscovery(activityId, input);\n  }\n\n  getDiscovery(id: string): Discovery | null {\n    return this.db.getDiscovery(id);\n  }\n\n  listDiscoveries(options?: Parameters<typeof this.db.listDiscoveries>[0]): Discovery[] {\n    return this.db.listDiscoveries(options ?? {});\n  }\n\n  // Decision methods\n  createDecision(activityId: string, input: CreateDecisionInput): Decision {\n    return this.db.createDecision(activityId, input);\n  }\n\n  getDecision(id: string): Decision | null {\n    return this.db.getDecision(id);\n  }\n\n  listPendingDecisions(): Decision[] {\n    return this.db.listPendingDecisions();\n  }\n\n  async approveDecision(id: string, approvedBy: string, reason?: string): Promise<void> {\n    this.db.approveDecision(id, approvedBy, reason);\n\n    // Log approval activity\n    const decision = this.db.getDecision(id);\n    if (decision) {\n      await this.logActivity({\n        type: \"approval\",\n        status: \"completed\",\n        inputData: { decisionId: id, approvedBy, reason },\n        outputData: { approved: true },\n        reasoning: reason,\n        agentId: approvedBy,\n      });\n    }\n  }\n\n  async rejectDecision(id: string, rejectedBy: string, reason: string): Promise<void> {\n    this.db.rejectDecision(id, rejectedBy, reason);\n\n    // Log rejection activity\n    await this.logActivity({\n      type: \"approval\",\n      status: \"completed\",\n      inputData: { decisionId: id, rejectedBy, reason },\n      outputData: { approved: false },\n      reasoning: reason,\n      agentId: rejectedBy,\n    });\n  }\n\n  // Activity methods\n  getActivity(id: string): Activity | null {\n    return this.db.getActivity(id);\n  }\n\n  listActivities(options?: Parameters<typeof this.db.listActivities>[0]): Activity[] {\n    return this.db.listActivities(options ?? {});\n  }\n\n  // Stats\n  getStats(): ReturnType<typeof this.db.getStats> {\n    return this.db.getStats();\n  }\n\n  // Cleanup\n  close(): void {\n    if (this.flushInterval) {\n      clearInterval(this.flushInterval);\n    }\n    this.db.close();\n  }\n\n  // Force sync pending items\n  async flush(): Promise<void> {\n    await this.processSyncQueue();\n  }\n}\n","import { z } from \"zod\";\n\n// Activity types\nexport const ActivityTypeSchema = z.enum([\n  \"discovery\",\n  \"decision\",\n  \"build\",\n  \"deployment\",\n  \"approval\",\n  \"error\",\n]);\nexport type ActivityType = z.infer<typeof ActivityTypeSchema>;\n\nexport const ActivityStatusSchema = z.enum([\n  \"pending\",\n  \"in_progress\",\n  \"completed\",\n  \"failed\",\n  \"cancelled\",\n]);\nexport type ActivityStatus = z.infer<typeof ActivityStatusSchema>;\n\nexport const ActivitySchema = z.object({\n  id: z.string(),\n  type: ActivityTypeSchema,\n  status: ActivityStatusSchema,\n  createdAt: z.date(),\n  updatedAt: z.date().optional(),\n  completedAt: z.date().optional(),\n  inputData: z.unknown().optional(),\n  outputData: z.unknown().optional(),\n  reasoning: z.string().optional(),\n  confidence: z.number().min(0).max(1).optional(),\n  parentId: z.string().optional(),\n  workflowId: z.string().optional(),\n  agentId: z.string().optional(),\n  solanaTxHash: z.string().optional(),\n  arweaveTxId: z.string().optional(),\n  contentHash: z.string().optional(),\n});\nexport type Activity = z.infer<typeof ActivitySchema>;\n\n// Discovery types\nexport const DiscoverySourceSchema = z.enum([\n  \"github\",\n  \"hackernews\",\n  \"twitter\",\n]);\nexport type DiscoverySource = z.infer<typeof DiscoverySourceSchema>;\n\nexport const DiscoverySchema = z.object({\n  id: z.string(),\n  activityId: z.string(),\n  source: DiscoverySourceSchema,\n  sourceId: z.string().optional(),\n  sourceUrl: z.string().url(),\n  title: z.string(),\n  description: z.string().optional(),\n  author: z.string().optional(),\n  authorUrl: z.string().optional(),\n  relevanceScore: z.number().min(0).max(1).optional(),\n  trendScore: z.number().optional(),\n  qualityScore: z.number().optional(),\n  category: z.string().optional(),\n  tags: z.array(z.string()).default([]),\n  language: z.string().optional(),\n  // GitHub specific\n  stars: z.number().optional(),\n  forks: z.number().optional(),\n  openIssues: z.number().optional(),\n  lastCommit: z.date().optional(),\n  license: z.string().optional(),\n  // HackerNews specific\n  hnPoints: z.number().optional(),\n  hnComments: z.number().optional(),\n  // Twitter specific\n  likes: z.number().optional(),\n  reposts: z.number().optional(),\n  analyzed: z.boolean().default(false),\n  decisionId: z.string().optional(),\n  createdAt: z.date(),\n  updatedAt: z.date().optional(),\n});\nexport type Discovery = z.infer<typeof DiscoverySchema>;\n\n// Decision types\nexport const DecisionStatusSchema = z.enum([\n  \"pending\",\n  \"approved\",\n  \"rejected\",\n  \"expired\",\n]);\nexport type DecisionStatus = z.infer<typeof DecisionStatusSchema>;\n\nexport const RecommendationSchema = z.enum([\n  \"build\",\n  \"integrate\",\n  \"monitor\",\n  \"ignore\",\n]);\nexport type Recommendation = z.infer<typeof RecommendationSchema>;\n\nexport const DecisionScoresSchema = z.object({\n  relevance: z.number().min(0).max(100),\n  impact: z.number().min(0).max(100),\n  effort: z.number().min(0).max(100),\n  timing: z.number().min(0).max(100),\n  quality: z.number().min(0).max(100),\n});\nexport type DecisionScores = z.infer<typeof DecisionScoresSchema>;\n\nexport const DecisionSchema = z.object({\n  id: z.string(),\n  activityId: z.string(),\n  discoveryId: z.string().optional(),\n  scores: DecisionScoresSchema,\n  totalScore: z.number().min(0).max(100),\n  reasoning: z.string(),\n  summary: z.string().optional(),\n  riskLevel: z.enum([\"low\", \"medium\", \"high\", \"critical\"]).optional(),\n  riskFactors: z.array(z.string()).default([]),\n  recommendation: RecommendationSchema,\n  recommendedPriority: z.number().optional(),\n  estimatedEffort: z.string().optional(),\n  requiresApproval: z.boolean().default(true),\n  approvalStatus: DecisionStatusSchema.default(\"pending\"),\n  approvedBy: z.string().optional(),\n  approvedAt: z.date().optional(),\n  approvalReason: z.string().optional(),\n  createdAt: z.date(),\n});\nexport type Decision = z.infer<typeof DecisionSchema>;\n\n// Sync queue types\nexport const SyncTargetSchema = z.enum([\"solana\", \"arweave\"]);\nexport type SyncTarget = z.infer<typeof SyncTargetSchema>;\n\nexport const SyncStatusSchema = z.enum([\n  \"queued\",\n  \"processing\",\n  \"completed\",\n  \"failed\",\n]);\nexport type SyncStatus = z.infer<typeof SyncStatusSchema>;\n\nexport const SyncQueueItemSchema = z.object({\n  id: z.string(),\n  activityId: z.string(),\n  target: SyncTargetSchema,\n  priority: z.number().default(0),\n  content: z.string(),\n  contentHash: z.string(),\n  status: SyncStatusSchema.default(\"queued\"),\n  retryCount: z.number().default(0),\n  maxRetries: z.number().default(3),\n  errorMessage: z.string().optional(),\n  createdAt: z.date(),\n  scheduledAt: z.date().optional(),\n  processedAt: z.date().optional(),\n});\nexport type SyncQueueItem = z.infer<typeof SyncQueueItemSchema>;\n\n// Solana memo format\nexport const SolanaMemoSchema = z.object({\n  v: z.literal(1),\n  t: z.literal(\"gicm:activity\"),\n  id: z.string(),\n  type: ActivityTypeSchema,\n  ts: z.number(),\n  h: z.string(),\n  ar: z.string().optional(),\n});\nexport type SolanaMemo = z.infer<typeof SolanaMemoSchema>;\n\n// Arweave activity record\nexport const ArweaveActivityRecordSchema = z.object({\n  \"@context\": z.literal(\"https://gicm.dev/schemas/activity/v1\"),\n  \"@type\": z.literal(\"OrchestratorActivity\"),\n  id: z.string(),\n  version: z.literal(1),\n  orchestrator: z.object({\n    id: z.string(),\n    version: z.string(),\n    owner: z.string(),\n  }),\n  activity: z.object({\n    type: ActivityTypeSchema,\n    status: ActivityStatusSchema,\n    priority: z.number(),\n    createdAt: z.string(),\n    completedAt: z.string().optional(),\n    input: z.unknown().optional(),\n    output: z.unknown().optional(),\n    reasoning: z.string().optional(),\n    confidence: z.number().optional(),\n  }),\n  relationships: z.object({\n    parentId: z.string().optional(),\n    workflowId: z.string().optional(),\n    agentId: z.string().optional(),\n    discoveryId: z.string().optional(),\n    decisionId: z.string().optional(),\n  }),\n  onChain: z.object({\n    solanaTx: z.string().optional(),\n    solanaSlot: z.number().optional(),\n    contentHash: z.string(),\n  }),\n  discovery: DiscoverySchema.optional(),\n  decision: DecisionSchema.optional(),\n  signature: z.object({\n    algorithm: z.literal(\"ed25519\"),\n    publicKey: z.string(),\n    value: z.string(),\n  }),\n});\nexport type ArweaveActivityRecord = z.infer<typeof ArweaveActivityRecordSchema>;\n\n// Configuration\nexport interface ActivityLoggerConfig {\n  dbPath?: string;\n  solana?: {\n    rpcUrl: string;\n    privateKey: string;\n    commitment?: \"processed\" | \"confirmed\" | \"finalized\";\n  };\n  arweave?: {\n    gatewayUrl?: string;\n    minPayloadSize?: number;\n  };\n  batchSize?: number;\n  flushInterval?: number;\n  immediateTypes?: ActivityType[];\n}\n\n// Input types for creating records\nexport type CreateActivityInput = Omit<\n  Activity,\n  \"id\" | \"createdAt\" | \"contentHash\"\n>;\nexport type CreateDiscoveryInput = Omit<\n  Discovery,\n  \"id\" | \"activityId\" | \"createdAt\"\n>;\nexport type CreateDecisionInput = Omit<\n  Decision,\n  \"id\" | \"activityId\" | \"createdAt\"\n>;\n"],"mappings":"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","names":[]}