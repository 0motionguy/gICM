{"version":3,"sources":["../src/orchestrator.ts"],"sourcesContent":["import { EventEmitter } from \"events\";\nimport { CronJob } from \"cron\";\nimport { ActivityLogger } from \"@gicm/activity-logger\";\nimport { HunterAgent, type HuntDiscovery } from \"@gicm/hunter-agent\";\nimport { DecisionAgent, type ScoredDiscovery } from \"@gicm/decision-agent\";\nimport { BuilderAgent } from \"@gicm/builder-agent\";\nimport { RefactorAgent } from \"@gicm/refactor-agent\";\nimport { DeployerAgent } from \"@gicm/deployer-agent\";\nimport type {\n  AutonomyLevel,\n  OrchestratorConfig,\n  OrchestratorEvent,\n  OrchestratorState,\n  PendingApproval,\n} from \"./types.js\";\n\nexport class GICMOrchestrator extends EventEmitter {\n  private config: OrchestratorConfig;\n  private state: OrchestratorState = \"idle\";\n  private autonomyLevel: AutonomyLevel;\n\n  // Agents\n  private hunter: HunterAgent | null = null;\n  private decision: DecisionAgent | null = null;\n  private builder: BuilderAgent | null = null;\n  private refactor: RefactorAgent | null = null;\n  private deployer: DeployerAgent | null = null;\n\n  // Activity logger\n  private logger: ActivityLogger | null = null;\n\n  // Scheduled jobs\n  private jobs: Map<string, CronJob> = new Map();\n\n  // Approval queue (for Level 2)\n  private pendingApprovals: Map<string, PendingApproval> = new Map();\n\n  constructor(config: OrchestratorConfig) {\n    super();\n    this.config = config;\n    this.autonomyLevel = config.autonomyLevel;\n  }\n\n  async start(): Promise<void> {\n    if (this.state === \"running\") {\n      console.log(\"[Orchestrator] Already running\");\n      return;\n    }\n\n    this.state = \"starting\";\n    console.log(`[Orchestrator] Starting in ${this.autonomyLevel} mode...`);\n\n    try {\n      // Initialize activity logger\n      if (this.config.activityLogger) {\n        this.logger = new ActivityLogger({\n          solana: this.config.activityLogger.solanaPrivateKey\n            ? {\n                rpcUrl:\n                  this.config.activityLogger.solanaRpcUrl ??\n                  \"https://api.mainnet-beta.solana.com\",\n                privateKey: this.config.activityLogger.solanaPrivateKey,\n              }\n            : undefined,\n        });\n      }\n\n      // Initialize agents\n      await this.initializeAgents();\n\n      // Schedule jobs\n      this.scheduleJobs();\n\n      this.state = \"running\";\n      this.emit(\"started\");\n      console.log(\"[Orchestrator] Started successfully\");\n\n      // Log activity\n      await this.logActivity(\"discovery\", \"completed\", {\n        action: \"orchestrator:started\",\n        autonomyLevel: this.autonomyLevel,\n      });\n    } catch (error) {\n      this.state = \"error\";\n      console.error(\"[Orchestrator] Failed to start:\", error);\n      throw error;\n    }\n  }\n\n  async stop(): Promise<void> {\n    if (this.state !== \"running\" && this.state !== \"paused\") {\n      return;\n    }\n\n    this.state = \"stopping\";\n    console.log(\"[Orchestrator] Stopping...\");\n\n    // Stop all jobs\n    for (const [name, job] of this.jobs) {\n      job.stop();\n      console.log(`[Orchestrator] Stopped job: ${name}`);\n    }\n    this.jobs.clear();\n\n    // Stop hunter agent\n    if (this.hunter) {\n      await this.hunter.stop();\n    }\n\n    // Flush activity logger\n    if (this.logger) {\n      await this.logger.flush();\n      this.logger.close();\n    }\n\n    this.state = \"stopped\";\n    this.emit(\"stopped\");\n    console.log(\"[Orchestrator] Stopped\");\n  }\n\n  async huntNow(sources?: Array<\"github\" | \"hackernews\" | \"twitter\">): Promise<HuntDiscovery[]> {\n    if (!this.hunter) {\n      throw new Error(\"Hunter agent not initialized\");\n    }\n\n    console.log(\"[Orchestrator] Manual hunt triggered\");\n    this.emit(\"hunt:started\");\n\n    const discoveries = await this.hunter.huntNow(sources);\n    this.emit(\"hunt:completed\", discoveries);\n\n    // Process discoveries\n    await this.processDiscoveries(discoveries);\n\n    return discoveries;\n  }\n\n  async approveDecision(id: string, reason?: string): Promise<void> {\n    const approval = this.pendingApprovals.get(id);\n    if (!approval) {\n      throw new Error(`Approval not found: ${id}`);\n    }\n\n    console.log(`[Orchestrator] Approved: ${approval.title}`);\n    this.pendingApprovals.delete(id);\n\n    // Log approval\n    await this.logActivity(\"approval\", \"completed\", {\n      approvalId: id,\n      action: \"approved\",\n      reason,\n    });\n\n    this.emit(\"approval:granted\", approval);\n\n    // Trigger build if auto mode\n    if (this.autonomyLevel === \"delegated\" || this.autonomyLevel === \"autonomous\") {\n      await this.triggerBuild(approval);\n    }\n  }\n\n  async rejectDecision(id: string, reason: string): Promise<void> {\n    const approval = this.pendingApprovals.get(id);\n    if (!approval) {\n      throw new Error(`Approval not found: ${id}`);\n    }\n\n    console.log(`[Orchestrator] Rejected: ${approval.title} - ${reason}`);\n    this.pendingApprovals.delete(id);\n\n    // Log rejection\n    await this.logActivity(\"approval\", \"completed\", {\n      approvalId: id,\n      action: \"rejected\",\n      reason,\n    });\n\n    this.emit(\"approval:rejected\", { approval, reason });\n  }\n\n  getPendingApprovals(): PendingApproval[] {\n    return Array.from(this.pendingApprovals.values());\n  }\n\n  getStatus(): {\n    state: OrchestratorState;\n    autonomyLevel: AutonomyLevel;\n    pendingApprovals: number;\n    activeJobs: string[];\n    stats: ReturnType<ActivityLogger[\"getStats\"]> | null;\n  } {\n    return {\n      state: this.state,\n      autonomyLevel: this.autonomyLevel,\n      pendingApprovals: this.pendingApprovals.size,\n      activeJobs: Array.from(this.jobs.keys()),\n      stats: this.logger?.getStats() ?? null,\n    };\n  }\n\n  private async initializeAgents(): Promise<void> {\n    // Common agent defaults\n    const commonDefaults = {\n      llmProvider: this.config.decision.llmProvider,\n      apiKey: this.config.decision.apiKey,\n      temperature: 0.7,\n      maxTokens: 4096,\n    } as const;\n\n    // Hunter agent\n    if (this.config.hunter.enabled) {\n      this.hunter = new HunterAgent({\n        name: \"hunter\",\n        verbose: true,\n        ...commonDefaults,\n        sources: this.config.hunter.sources.map((source) => ({\n          source,\n          enabled: true,\n          apiToken: source === \"github\" ? this.config.hunter.githubToken : undefined,\n          apifyToken: source === \"twitter\" ? this.config.hunter.apifyToken : undefined,\n        })),\n        onDiscovery: async (discoveries) => {\n          await this.processDiscoveries(discoveries);\n        },\n      });\n    }\n\n    // Decision agent\n    this.decision = new DecisionAgent({\n      name: \"decision\",\n      verbose: true,\n      ...commonDefaults,\n      model: this.config.decision.model,\n      thresholds: {\n        autoApprove: this.config.decision.autoApproveThreshold ?? 85,\n        humanReview: 50,\n      },\n      onDecision: async (discovery, result, status) => {\n        await this.handleDecision(discovery, result, status);\n      },\n    });\n\n    // Builder agent\n    this.builder = new BuilderAgent({\n      name: \"builder\",\n      verbose: true,\n      ...commonDefaults,\n    });\n\n    // Refactor agent\n    this.refactor = new RefactorAgent({\n      name: \"refactor\",\n      verbose: true,\n      ...commonDefaults,\n    });\n\n    // Deployer agent\n    this.deployer = new DeployerAgent({\n      name: \"deployer\",\n      verbose: true,\n      ...commonDefaults,\n    });\n  }\n\n  private scheduleJobs(): void {\n    const schedules = this.config.schedules ?? {};\n\n    // Hunter jobs\n    if (this.config.hunter.enabled && this.hunter) {\n      // Start the hunter's internal scheduler\n      this.hunter.start();\n    }\n\n    // Refactor job (daily)\n    const refactorSchedule = schedules.refactor ?? \"0 3 * * *\"; // 3 AM daily\n    const refactorJob = new CronJob(refactorSchedule, async () => {\n      console.log(\"[Orchestrator] Running daily refactor analysis...\");\n      await this.refactor?.analyzeCode();\n    });\n    refactorJob.start();\n    this.jobs.set(\"refactor\", refactorJob);\n  }\n\n  private async processDiscoveries(discoveries: HuntDiscovery[]): Promise<void> {\n    if (!this.decision || discoveries.length === 0) return;\n\n    console.log(`[Orchestrator] Processing ${discoveries.length} discoveries...`);\n\n    for (const discovery of discoveries) {\n      this.emit(\"discovery:found\", discovery);\n\n      // Log discovery\n      await this.logActivity(\"discovery\", \"completed\", {\n        discoveryId: discovery.id,\n        source: discovery.source,\n        title: discovery.title,\n        url: discovery.sourceUrl,\n      });\n    }\n\n    // Evaluate discoveries\n    const results = await this.decision.evaluateMany(discoveries);\n\n    for (const scored of results) {\n      await this.handleDecision(\n        scored.discovery,\n        scored.result,\n        scored.status\n      );\n    }\n  }\n\n  private async handleDecision(\n    discovery: HuntDiscovery,\n    result: ScoredDiscovery[\"result\"],\n    status: ScoredDiscovery[\"status\"]\n  ): Promise<void> {\n    // Log decision\n    await this.logActivity(\"decision\", \"completed\", {\n      discoveryId: discovery.id,\n      title: discovery.title,\n      score: result.totalScore,\n      status,\n      recommendation: result.recommendation,\n    });\n\n    this.emit(\"decision:made\", { discovery, result, status });\n\n    if (status === \"auto_approve\") {\n      // Auto-approved: proceed based on autonomy level\n      if (this.autonomyLevel === \"autonomous\" || this.autonomyLevel === \"delegated\") {\n        await this.triggerBuild({\n          id: discovery.id,\n          discoveryId: discovery.id,\n          decisionId: discovery.id,\n          title: discovery.title,\n          source: discovery.source,\n          score: result.totalScore,\n          recommendation: result.recommendation,\n          reasoning: result.reasoning,\n          createdAt: new Date(),\n        });\n      } else {\n        // Even auto-approved needs human confirmation in supervised mode\n        this.queueForApproval(discovery, result);\n      }\n    } else if (status === \"human_review\") {\n      // Queue for human review\n      this.queueForApproval(discovery, result);\n    }\n    // Rejected: no action needed\n  }\n\n  private queueForApproval(\n    discovery: HuntDiscovery,\n    result: ScoredDiscovery[\"result\"]\n  ): void {\n    const approval: PendingApproval = {\n      id: `approval-${Date.now()}`,\n      discoveryId: discovery.id,\n      decisionId: discovery.id,\n      title: discovery.title,\n      source: discovery.source,\n      score: result.totalScore,\n      recommendation: result.recommendation,\n      reasoning: result.reasoning,\n      createdAt: new Date(),\n    };\n\n    this.pendingApprovals.set(approval.id, approval);\n    this.emit(\"approval:required\", approval);\n\n    console.log(\n      `[Orchestrator] Queued for approval: ${discovery.title} (${result.totalScore}/100)`\n    );\n  }\n\n  private async triggerBuild(approval: PendingApproval): Promise<void> {\n    if (!this.builder) return;\n\n    console.log(`[Orchestrator] Triggering build: ${approval.title}`);\n    this.emit(\"build:started\", approval);\n\n    // Log build start\n    await this.logActivity(\"build\", \"in_progress\", {\n      approvalId: approval.id,\n      title: approval.title,\n    });\n\n    // Trigger builder\n    const result = await this.builder.build({\n      discoveryId: approval.discoveryId,\n      type: \"integration\",\n      name: approval.title.toLowerCase().replace(/\\s+/g, \"-\"),\n      description: approval.reasoning,\n      sourceUrl: `https://example.com/${approval.discoveryId}`,\n    });\n\n    this.emit(\"build:completed\", result);\n\n    // Log build completion\n    await this.logActivity(\"build\", \"completed\", {\n      approvalId: approval.id,\n      buildId: result.buildId,\n      status: result.status,\n    });\n  }\n\n  private async logActivity(\n    type: \"discovery\" | \"decision\" | \"build\" | \"deployment\" | \"approval\" | \"error\",\n    status: \"pending\" | \"in_progress\" | \"completed\" | \"failed\",\n    data: Record<string, unknown>\n  ): Promise<void> {\n    if (!this.logger) return;\n\n    try {\n      await this.logger.logActivity({\n        type,\n        status,\n        inputData: data,\n        agentId: \"orchestrator\",\n      });\n    } catch (error) {\n      console.error(\"[Orchestrator] Failed to log activity:\", error);\n    }\n  }\n}\n"],"mappings":"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","names":[]}