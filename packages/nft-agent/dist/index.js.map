{"version":3,"sources":["../src/nft-agent.ts","../src/types.ts","../src/providers/metaplex.ts","../src/providers/opensea.ts","../src/providers/magic-eden.ts","../src/analyzers/rarity.ts","../src/analyzers/pricing.ts"],"sourcesContent":["import { z } from \"zod\";\nimport {\n  BaseAgent,\n  type AgentConfig,\n  type AgentContext,\n  type AgentResult,\n  type LLMClient,\n  createLLMClient,\n} from \"@gicm/agent-core\";\nimport type { NFTAgentConfig, NFT, NFTCollection, NFTProvider, RarityScore } from \"./types.js\";\nimport { NFTAgentConfigSchema } from \"./types.js\";\nimport { MetaplexProvider } from \"./providers/metaplex.js\";\nimport { OpenSeaProvider } from \"./providers/opensea.js\";\nimport { MagicEdenProvider } from \"./providers/magic-eden.js\";\nimport { RarityAnalyzer } from \"./analyzers/rarity.js\";\nimport { PricingAnalyzer, type PriceEstimate, type MarketAnalysis } from \"./analyzers/pricing.js\";\n\nexport interface NFTAgentAnalysis {\n  collection?: NFTCollection;\n  nft?: NFT;\n  rarity?: RarityScore;\n  priceEstimate?: PriceEstimate;\n  market?: MarketAnalysis;\n  whaleHolders?: Array<{ address: string; balance: number; percentage: number }>;\n  aiSummary?: string;\n}\n\nexport class NFTAgent extends BaseAgent {\n  private providers: Map<string, NFTProvider> = new Map();\n  private rarityAnalyzer: RarityAnalyzer;\n  private pricingAnalyzer: PricingAnalyzer;\n  private nftConfig: NFTAgentConfig;\n  private llmClient?: LLMClient;\n\n  constructor(config: NFTAgentConfig & AgentConfig) {\n    const validatedConfig = NFTAgentConfigSchema.parse(config);\n    super(\"nft-agent\", config);\n\n    this.nftConfig = validatedConfig;\n    this.rarityAnalyzer = new RarityAnalyzer();\n    this.pricingAnalyzer = new PricingAnalyzer();\n\n    // Initialize LLM client if API key provided\n    if (config.apiKey) {\n      this.llmClient = createLLMClient({\n        provider: config.llmProvider ?? \"openai\",\n        model: config.llmModel,\n        apiKey: config.apiKey,\n        temperature: config.temperature ?? 0.7,\n        maxTokens: config.maxTokens ?? 4096,\n      });\n    }\n\n    this.initializeProviders(validatedConfig);\n    this.initializeTools();\n  }\n\n  private initializeProviders(config: NFTAgentConfig): void {\n    // Metaplex for Solana\n    this.providers.set(\"metaplex\", new MetaplexProvider());\n\n    // Magic Eden for Solana\n    this.providers.set(\"magic-eden\", new MagicEdenProvider({\n      apiKey: config.magicEdenApiKey,\n    }));\n\n    // OpenSea for EVM (requires API key)\n    if (config.openSeaApiKey) {\n      this.providers.set(\"opensea\", new OpenSeaProvider({\n        apiKey: config.openSeaApiKey,\n      }));\n    }\n  }\n\n  private initializeTools(): void {\n    this.registerTool({\n      name: \"get_collection\",\n      description: \"Get NFT collection info including floor price and stats\",\n      parameters: z.object({\n        address: z.string().describe(\"Collection address or symbol\"),\n        provider: z.string().default(\"magic-eden\").describe(\"Provider: metaplex, magic-eden, opensea\"),\n      }),\n      execute: async (params) => {\n        const { address, provider } = params as { address: string; provider: string };\n        return this.getCollection(address, provider);\n      },\n    });\n\n    this.registerTool({\n      name: \"get_nft\",\n      description: \"Get specific NFT details\",\n      parameters: z.object({\n        contractAddress: z.string().describe(\"Contract/collection address\"),\n        tokenId: z.string().describe(\"Token ID or mint address\"),\n        provider: z.string().default(\"magic-eden\").describe(\"Provider: metaplex, magic-eden, opensea\"),\n      }),\n      execute: async (params) => {\n        const { contractAddress, tokenId, provider } = params as {\n          contractAddress: string;\n          tokenId: string;\n          provider: string;\n        };\n        return this.getNFT(contractAddress, tokenId, provider);\n      },\n    });\n\n    this.registerTool({\n      name: \"analyze_rarity\",\n      description: \"Analyze rarity for an NFT within its collection\",\n      parameters: z.object({\n        collectionAddress: z.string().describe(\"Collection address\"),\n        tokenId: z.string().describe(\"Token ID to analyze\"),\n        provider: z.string().default(\"magic-eden\").describe(\"Provider name\"),\n      }),\n      execute: async (params) => {\n        const { collectionAddress, tokenId, provider } = params as {\n          collectionAddress: string;\n          tokenId: string;\n          provider: string;\n        };\n        return this.analyzeRarity(collectionAddress, tokenId, provider);\n      },\n    });\n\n    this.registerTool({\n      name: \"estimate_price\",\n      description: \"Estimate fair price for an NFT\",\n      parameters: z.object({\n        collectionAddress: z.string().describe(\"Collection address\"),\n        tokenId: z.string().describe(\"Token ID\"),\n        provider: z.string().default(\"magic-eden\").describe(\"Provider name\"),\n      }),\n      execute: async (params) => {\n        const { collectionAddress, tokenId, provider } = params as {\n          collectionAddress: string;\n          tokenId: string;\n          provider: string;\n        };\n        return this.estimatePrice(collectionAddress, tokenId, provider);\n      },\n    });\n\n    this.registerTool({\n      name: \"get_whale_holders\",\n      description: \"Get top holders (whales) for a collection\",\n      parameters: z.object({\n        collectionAddress: z.string().describe(\"Collection address\"),\n        provider: z.string().default(\"magic-eden\").describe(\"Provider name\"),\n        limit: z.number().default(20).describe(\"Number of holders to return\"),\n      }),\n      execute: async (params) => {\n        const { collectionAddress, provider, limit } = params as {\n          collectionAddress: string;\n          provider: string;\n          limit: number;\n        };\n        return this.getWhaleHolders(collectionAddress, provider, limit);\n      },\n    });\n  }\n\n  getSystemPrompt(): string {\n    return `You are an NFT analysis expert. You can:\n- Analyze NFT collections and individual NFTs\n- Calculate rarity scores and rankings\n- Estimate fair prices based on market data\n- Track whale holders and collection stats\n- Provide investment insights for NFT traders\n\nAvailable providers: ${Array.from(this.providers.keys()).join(\", \")}\n\nWhen analyzing NFTs, consider:\n1. Rarity within the collection (trait scarcity)\n2. Floor price and listing activity\n3. Whale concentration and holder distribution\n4. Market trends and volume\n5. Collection verification status`;\n  }\n\n  async analyze(context: AgentContext): Promise<AgentResult> {\n    const query = context.userQuery ?? \"\";\n\n    if (!this.llmClient) {\n      return this.createResult(\n        false,\n        null,\n        \"LLM client not configured. Provide apiKey in config.\",\n        0,\n        \"No LLM available for AI analysis\"\n      );\n    }\n\n    try {\n      const response = await this.llmClient.chat([\n        { role: \"system\", content: this.getSystemPrompt() },\n        { role: \"user\", content: query },\n      ]);\n\n      return this.createResult(\n        true,\n        { aiSummary: response.content },\n        undefined,\n        0.8,\n        \"AI analysis completed\"\n      );\n    } catch (error) {\n      return this.createResult(\n        false,\n        null,\n        error instanceof Error ? error.message : \"Unknown error\",\n        0,\n        \"Failed to complete AI analysis\"\n      );\n    }\n  }\n\n  async getCollection(\n    address: string,\n    providerName = \"magic-eden\"\n  ): Promise<NFTCollection | null> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return null;\n    return provider.getCollection(address);\n  }\n\n  async getNFT(\n    contractAddress: string,\n    tokenId: string,\n    providerName = \"magic-eden\"\n  ): Promise<NFT | null> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return null;\n    return provider.getNFT(contractAddress, tokenId);\n  }\n\n  async analyzeRarity(\n    collectionAddress: string,\n    tokenId: string,\n    providerName = \"magic-eden\"\n  ): Promise<RarityScore | null> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return null;\n\n    // Get collection NFTs for rarity calculation\n    const nfts = await provider.getCollectionNFTs(collectionAddress, 100);\n    if (nfts.length === 0) return null;\n\n    const rarityMap = this.rarityAnalyzer.calculateCollectionRarity(nfts);\n    return rarityMap.get(tokenId) ?? null;\n  }\n\n  async estimatePrice(\n    collectionAddress: string,\n    tokenId: string,\n    providerName = \"magic-eden\"\n  ): Promise<PriceEstimate | null> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return null;\n\n    const [collection, nfts, listings] = await Promise.all([\n      provider.getCollection(collectionAddress),\n      provider.getCollectionNFTs(collectionAddress, 100),\n      provider.getListings(collectionAddress, 50),\n    ]);\n\n    if (!collection) return null;\n\n    const rarityMap = this.rarityAnalyzer.calculateCollectionRarity(nfts);\n    const rarity = rarityMap.get(tokenId) ?? null;\n    const market = this.pricingAnalyzer.analyzeMarket(collection, listings);\n\n    return this.pricingAnalyzer.estimatePrice(rarity, market, collection);\n  }\n\n  async getWhaleHolders(\n    collectionAddress: string,\n    providerName = \"magic-eden\",\n    limit = 20\n  ): Promise<Array<{ address: string; balance: number; percentage: number }>> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return [];\n    return provider.getHolders(collectionAddress, limit);\n  }\n\n  async getMarketAnalysis(\n    collectionAddress: string,\n    providerName = \"magic-eden\"\n  ): Promise<MarketAnalysis | null> {\n    const provider = this.providers.get(providerName);\n    if (!provider) return null;\n\n    const [collection, listings] = await Promise.all([\n      provider.getCollection(collectionAddress),\n      provider.getListings(collectionAddress, 100),\n    ]);\n\n    if (!collection) return null;\n    return this.pricingAnalyzer.analyzeMarket(collection, listings);\n  }\n}\n","import { z } from \"zod\";\n\nexport const NFTMetadataSchema = z.object({\n  name: z.string(),\n  symbol: z.string(),\n  description: z.string(),\n  image: z.string(),\n  externalUrl: z.string().optional(),\n  attributes: z.array(z.object({\n    traitType: z.string(),\n    value: z.union([z.string(), z.number()]),\n    displayType: z.string().optional(),\n  })).optional(),\n  properties: z.record(z.unknown()).optional(),\n});\n\nexport type NFTMetadata = z.infer<typeof NFTMetadataSchema>;\n\nexport interface NFT {\n  tokenId: string;\n  contractAddress: string;\n  chain: \"evm\" | \"solana\";\n  network: string;\n  metadata: NFTMetadata;\n  owner: string;\n  mintAddress?: string;\n}\n\nexport interface NFTCollection {\n  address: string;\n  name: string;\n  symbol: string;\n  chain: \"evm\" | \"solana\";\n  network: string;\n  totalSupply: number;\n  floorPrice?: number;\n  floorPriceCurrency?: string;\n  volume24h?: number;\n  owners?: number;\n  verified?: boolean;\n}\n\nexport interface RarityScore {\n  tokenId: string;\n  rank: number;\n  score: number;\n  traitScores: Array<{\n    traitType: string;\n    value: string;\n    rarity: number;\n    score: number;\n  }>;\n}\n\nexport interface NFTListing {\n  tokenId: string;\n  price: number;\n  currency: string;\n  marketplace: string;\n  seller: string;\n  expiresAt?: Date;\n}\n\nexport interface WhaleHolder {\n  address: string;\n  balance: number;\n  percentage: number;\n  acquisitionDate?: Date;\n}\n\nexport const NFTAgentConfigSchema = z.object({\n  chain: z.enum([\"evm\", \"solana\"]).default(\"solana\"),\n  network: z.string().default(\"mainnet-beta\"),\n  openSeaApiKey: z.string().optional(),\n  magicEdenApiKey: z.string().optional(),\n});\n\nexport type NFTAgentConfig = z.infer<typeof NFTAgentConfigSchema>;\n\nexport interface NFTProvider {\n  name: string;\n  chain: \"evm\" | \"solana\";\n\n  getCollection(address: string): Promise<NFTCollection | null>;\n  getNFT(contractAddress: string, tokenId: string): Promise<NFT | null>;\n  getCollectionNFTs(address: string, limit?: number): Promise<NFT[]>;\n  getFloorPrice(address: string): Promise<number | null>;\n  getListings(address: string, limit?: number): Promise<NFTListing[]>;\n  getHolders(address: string, limit?: number): Promise<WhaleHolder[]>;\n}\n","import type { NFTProvider, NFT, NFTCollection, NFTListing, WhaleHolder, NFTMetadata } from \"../types.js\";\n\ninterface HeliusNFTResponse {\n  id: string;\n  content?: {\n    metadata?: {\n      name?: string;\n      symbol?: string;\n      description?: string;\n    };\n    files?: Array<{ uri?: string }>;\n    json_uri?: string;\n  };\n  ownership?: {\n    owner?: string;\n  };\n  grouping?: Array<{ group_key?: string; group_value?: string }>;\n}\n\ninterface HeliusCollectionResponse {\n  items?: HeliusNFTResponse[];\n  total?: number;\n}\n\nexport class MetaplexProvider implements NFTProvider {\n  name = \"metaplex\";\n  chain = \"solana\" as const;\n  private rpcUrl: string;\n  private heliusApiKey?: string;\n\n  constructor(config: { rpcUrl?: string; heliusApiKey?: string } = {}) {\n    this.rpcUrl = config.rpcUrl ?? \"https://api.mainnet-beta.solana.com\";\n    this.heliusApiKey = config.heliusApiKey;\n  }\n\n  async getCollection(address: string): Promise<NFTCollection | null> {\n    if (!this.heliusApiKey) {\n      return this.getCollectionBasic(address);\n    }\n\n    try {\n      const response = await fetch(\n        `https://api.helius.xyz/v0/token-metadata?api-key=${this.heliusApiKey}`,\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ mintAccounts: [address] }),\n        }\n      );\n      const data = (await response.json()) as HeliusNFTResponse[];\n      if (!data?.[0]) return null;\n\n      const nft = data[0];\n      return {\n        address,\n        name: nft.content?.metadata?.name ?? \"Unknown\",\n        symbol: nft.content?.metadata?.symbol ?? \"\",\n        chain: \"solana\",\n        network: \"mainnet-beta\",\n        totalSupply: 0,\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  private async getCollectionBasic(address: string): Promise<NFTCollection | null> {\n    try {\n      const response = await fetch(this.rpcUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: 1,\n          method: \"getAccountInfo\",\n          params: [address, { encoding: \"jsonParsed\" }],\n        }),\n      });\n      const data = (await response.json()) as { result?: { value?: unknown } };\n      if (!data.result?.value) return null;\n\n      return {\n        address,\n        name: address.slice(0, 8),\n        symbol: address.slice(0, 4).toUpperCase(),\n        chain: \"solana\",\n        network: \"mainnet-beta\",\n        totalSupply: 0,\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  async getNFT(mintAddress: string, _tokenId: string): Promise<NFT | null> {\n    if (!this.heliusApiKey) {\n      return this.getNFTBasic(mintAddress);\n    }\n\n    try {\n      const response = await fetch(\n        `https://api.helius.xyz/v0/token-metadata?api-key=${this.heliusApiKey}`,\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ mintAccounts: [mintAddress] }),\n        }\n      );\n      const data = (await response.json()) as HeliusNFTResponse[];\n      if (!data?.[0]) return null;\n\n      const nft = data[0];\n      const metadata: NFTMetadata = {\n        name: nft.content?.metadata?.name ?? \"Unknown\",\n        symbol: nft.content?.metadata?.symbol ?? \"\",\n        description: nft.content?.metadata?.description ?? \"\",\n        image: nft.content?.files?.[0]?.uri ?? \"\",\n      };\n\n      return {\n        tokenId: mintAddress,\n        contractAddress: mintAddress,\n        chain: \"solana\",\n        network: \"mainnet-beta\",\n        metadata,\n        owner: nft.ownership?.owner ?? \"\",\n        mintAddress,\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  private async getNFTBasic(mintAddress: string): Promise<NFT | null> {\n    try {\n      const response = await fetch(this.rpcUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: 1,\n          method: \"getAccountInfo\",\n          params: [mintAddress, { encoding: \"jsonParsed\" }],\n        }),\n      });\n      const data = (await response.json()) as { result?: { value?: unknown } };\n      if (!data.result?.value) return null;\n\n      return {\n        tokenId: mintAddress,\n        contractAddress: mintAddress,\n        chain: \"solana\",\n        network: \"mainnet-beta\",\n        metadata: {\n          name: mintAddress.slice(0, 8),\n          symbol: \"\",\n          description: \"\",\n          image: \"\",\n        },\n        owner: \"\",\n        mintAddress,\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  async getCollectionNFTs(address: string, limit = 20): Promise<NFT[]> {\n    if (!this.heliusApiKey) return [];\n\n    try {\n      const response = await fetch(\n        `https://api.helius.xyz/v1/nfts?api-key=${this.heliusApiKey}`,\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            query: { groupKey: \"collection\", groupValue: address },\n            options: { limit },\n          }),\n        }\n      );\n      const data = (await response.json()) as HeliusCollectionResponse;\n\n      return (data.items ?? []).map((item) => ({\n        tokenId: item.id,\n        contractAddress: address,\n        chain: \"solana\" as const,\n        network: \"mainnet-beta\",\n        metadata: {\n          name: item.content?.metadata?.name ?? \"Unknown\",\n          symbol: item.content?.metadata?.symbol ?? \"\",\n          description: item.content?.metadata?.description ?? \"\",\n          image: item.content?.files?.[0]?.uri ?? \"\",\n        },\n        owner: item.ownership?.owner ?? \"\",\n        mintAddress: item.id,\n      }));\n    } catch {\n      return [];\n    }\n  }\n\n  async getFloorPrice(_address: string): Promise<number | null> {\n    // Would integrate with Magic Eden API for floor price\n    return null;\n  }\n\n  async getListings(_address: string, _limit = 20): Promise<NFTListing[]> {\n    // Would integrate with Magic Eden API for listings\n    return [];\n  }\n\n  async getHolders(_address: string, _limit = 20): Promise<WhaleHolder[]> {\n    // Would need DAS API or indexer for holder data\n    return [];\n  }\n}\n","import type { NFTProvider, NFT, NFTCollection, NFTListing, WhaleHolder, NFTMetadata } from \"../types.js\";\n\ninterface OpenSeaCollection {\n  collection?: string;\n  name?: string;\n  description?: string;\n  image_url?: string;\n  banner_image_url?: string;\n  owner?: string;\n  safelist_status?: string;\n  category?: string;\n  is_disabled?: boolean;\n  is_nsfw?: boolean;\n  trait_offers_enabled?: boolean;\n  collection_offers_enabled?: boolean;\n  opensea_url?: string;\n  project_url?: string;\n  wiki_url?: string;\n  discord_url?: string;\n  telegram_url?: string;\n  twitter_username?: string;\n  instagram_username?: string;\n  contracts?: Array<{\n    address?: string;\n    chain?: string;\n  }>;\n  total_supply?: number;\n}\n\ninterface OpenSeaNFT {\n  identifier?: string;\n  collection?: string;\n  contract?: string;\n  token_standard?: string;\n  name?: string;\n  description?: string;\n  image_url?: string;\n  metadata_url?: string;\n  owners?: Array<{ address?: string; quantity?: number }>;\n  traits?: Array<{\n    trait_type?: string;\n    value?: string;\n    display_type?: string;\n  }>;\n}\n\ninterface OpenSeaListing {\n  order_hash?: string;\n  chain?: string;\n  type?: string;\n  price?: {\n    current?: {\n      currency?: string;\n      decimals?: number;\n      value?: string;\n    };\n  };\n  protocol_data?: {\n    parameters?: {\n      offerer?: string;\n      endTime?: string;\n    };\n  };\n}\n\ninterface OpenSeaListingsResponse {\n  listings?: OpenSeaListing[];\n}\n\ninterface OpenSeaNFTsResponse {\n  nfts?: OpenSeaNFT[];\n}\n\nexport class OpenSeaProvider implements NFTProvider {\n  name = \"opensea\";\n  chain = \"evm\" as const;\n  private apiKey: string;\n  private baseUrl = \"https://api.opensea.io/api/v2\";\n\n  constructor(config: { apiKey: string }) {\n    this.apiKey = config.apiKey;\n  }\n\n  private async fetch<T>(endpoint: string): Promise<T | null> {\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        headers: {\n          \"X-API-KEY\": this.apiKey,\n          Accept: \"application/json\",\n        },\n      });\n      if (!response.ok) return null;\n      return (await response.json()) as T;\n    } catch {\n      return null;\n    }\n  }\n\n  async getCollection(slug: string): Promise<NFTCollection | null> {\n    const data = await this.fetch<OpenSeaCollection>(`/collections/${slug}`);\n    if (!data) return null;\n\n    return {\n      address: data.contracts?.[0]?.address ?? slug,\n      name: data.name ?? \"Unknown\",\n      symbol: \"\",\n      chain: \"evm\",\n      network: data.contracts?.[0]?.chain ?? \"ethereum\",\n      totalSupply: data.total_supply ?? 0,\n      verified: data.safelist_status === \"verified\",\n    };\n  }\n\n  async getNFT(contractAddress: string, tokenId: string): Promise<NFT | null> {\n    const data = await this.fetch<OpenSeaNFT>(\n      `/chain/ethereum/contract/${contractAddress}/nfts/${tokenId}`\n    );\n    if (!data) return null;\n\n    const metadata: NFTMetadata = {\n      name: data.name ?? `#${tokenId}`,\n      symbol: \"\",\n      description: data.description ?? \"\",\n      image: data.image_url ?? \"\",\n      attributes: data.traits?.map((t) => ({\n        traitType: t.trait_type ?? \"\",\n        value: t.value ?? \"\",\n        displayType: t.display_type,\n      })),\n    };\n\n    return {\n      tokenId,\n      contractAddress,\n      chain: \"evm\",\n      network: \"ethereum\",\n      metadata,\n      owner: data.owners?.[0]?.address ?? \"\",\n    };\n  }\n\n  async getCollectionNFTs(slug: string, limit = 20): Promise<NFT[]> {\n    const data = await this.fetch<OpenSeaNFTsResponse>(\n      `/collection/${slug}/nfts?limit=${limit}`\n    );\n    if (!data?.nfts) return [];\n\n    return data.nfts.map((nft) => ({\n      tokenId: nft.identifier ?? \"\",\n      contractAddress: nft.contract ?? \"\",\n      chain: \"evm\" as const,\n      network: \"ethereum\",\n      metadata: {\n        name: nft.name ?? `#${nft.identifier}`,\n        symbol: \"\",\n        description: nft.description ?? \"\",\n        image: nft.image_url ?? \"\",\n        attributes: nft.traits?.map((t) => ({\n          traitType: t.trait_type ?? \"\",\n          value: t.value ?? \"\",\n          displayType: t.display_type,\n        })),\n      },\n      owner: nft.owners?.[0]?.address ?? \"\",\n    }));\n  }\n\n  async getFloorPrice(slug: string): Promise<number | null> {\n    const data = await this.fetch<{ total?: { floor_price?: number } }>(\n      `/collections/${slug}/stats`\n    );\n    return data?.total?.floor_price ?? null;\n  }\n\n  async getListings(slug: string, limit = 20): Promise<NFTListing[]> {\n    const data = await this.fetch<OpenSeaListingsResponse>(\n      `/listings/collection/${slug}/all?limit=${limit}`\n    );\n    if (!data?.listings) return [];\n\n    return data.listings.map((listing) => ({\n      tokenId: listing.order_hash ?? \"\",\n      price: parseFloat(listing.price?.current?.value ?? \"0\") /\n        Math.pow(10, listing.price?.current?.decimals ?? 18),\n      currency: listing.price?.current?.currency ?? \"ETH\",\n      marketplace: \"opensea\",\n      seller: listing.protocol_data?.parameters?.offerer ?? \"\",\n      expiresAt: listing.protocol_data?.parameters?.endTime\n        ? new Date(parseInt(listing.protocol_data.parameters.endTime) * 1000)\n        : undefined,\n    }));\n  }\n\n  async getHolders(_address: string, _limit = 20): Promise<WhaleHolder[]> {\n    // OpenSea API doesn't provide holder data directly\n    // Would need to use on-chain data or other providers\n    return [];\n  }\n}\n","import type { NFTProvider, NFT, NFTCollection, NFTListing, WhaleHolder, NFTMetadata } from \"../types.js\";\n\ninterface MagicEdenCollection {\n  symbol?: string;\n  name?: string;\n  description?: string;\n  image?: string;\n  floorPrice?: number;\n  volumeAll?: number;\n  listedCount?: number;\n}\n\ninterface MagicEdenNFT {\n  mintAddress?: string;\n  name?: string;\n  image?: string;\n  owner?: string;\n  attributes?: Array<{\n    trait_type?: string;\n    value?: string;\n  }>;\n}\n\ninterface MagicEdenListing {\n  pdaAddress?: string;\n  tokenMint?: string;\n  price?: number;\n  seller?: string;\n  expiry?: number;\n}\n\ninterface MagicEdenHolder {\n  owner?: string;\n  tokenCount?: number;\n}\n\nexport class MagicEdenProvider implements NFTProvider {\n  name = \"magic-eden\";\n  chain = \"solana\" as const;\n  private apiKey?: string;\n  private baseUrl = \"https://api-mainnet.magiceden.dev/v2\";\n\n  constructor(config: { apiKey?: string } = {}) {\n    this.apiKey = config.apiKey;\n  }\n\n  private async fetch<T>(endpoint: string): Promise<T | null> {\n    try {\n      const headers: Record<string, string> = {\n        Accept: \"application/json\",\n      };\n      if (this.apiKey) {\n        headers[\"Authorization\"] = `Bearer ${this.apiKey}`;\n      }\n\n      const response = await fetch(`${this.baseUrl}${endpoint}`, { headers });\n      if (!response.ok) return null;\n      return (await response.json()) as T;\n    } catch {\n      return null;\n    }\n  }\n\n  async getCollection(symbol: string): Promise<NFTCollection | null> {\n    const data = await this.fetch<MagicEdenCollection>(`/collections/${symbol}`);\n    if (!data) return null;\n\n    return {\n      address: symbol,\n      name: data.name ?? symbol,\n      symbol: data.symbol ?? \"\",\n      chain: \"solana\",\n      network: \"mainnet-beta\",\n      totalSupply: data.listedCount ?? 0,\n      floorPrice: data.floorPrice ? data.floorPrice / 1e9 : undefined,\n      floorPriceCurrency: \"SOL\",\n      volume24h: data.volumeAll,\n    };\n  }\n\n  async getNFT(collectionSymbol: string, mintAddress: string): Promise<NFT | null> {\n    const data = await this.fetch<MagicEdenNFT>(`/tokens/${mintAddress}`);\n    if (!data) return null;\n\n    const metadata: NFTMetadata = {\n      name: data.name ?? mintAddress.slice(0, 8),\n      symbol: \"\",\n      description: \"\",\n      image: data.image ?? \"\",\n      attributes: data.attributes?.map((attr) => ({\n        traitType: attr.trait_type ?? \"\",\n        value: attr.value ?? \"\",\n      })),\n    };\n\n    return {\n      tokenId: mintAddress,\n      contractAddress: collectionSymbol,\n      chain: \"solana\",\n      network: \"mainnet-beta\",\n      metadata,\n      owner: data.owner ?? \"\",\n      mintAddress,\n    };\n  }\n\n  async getCollectionNFTs(symbol: string, limit = 20): Promise<NFT[]> {\n    const data = await this.fetch<MagicEdenNFT[]>(\n      `/collections/${symbol}/listings?limit=${limit}`\n    );\n    if (!data) return [];\n\n    return data.map((nft) => ({\n      tokenId: nft.mintAddress ?? \"\",\n      contractAddress: symbol,\n      chain: \"solana\" as const,\n      network: \"mainnet-beta\",\n      metadata: {\n        name: nft.name ?? \"\",\n        symbol: \"\",\n        description: \"\",\n        image: nft.image ?? \"\",\n        attributes: nft.attributes?.map((attr) => ({\n          traitType: attr.trait_type ?? \"\",\n          value: attr.value ?? \"\",\n        })),\n      },\n      owner: nft.owner ?? \"\",\n      mintAddress: nft.mintAddress,\n    }));\n  }\n\n  async getFloorPrice(symbol: string): Promise<number | null> {\n    const data = await this.fetch<{ floorPrice?: number }>(\n      `/collections/${symbol}/stats`\n    );\n    if (!data?.floorPrice) return null;\n    return data.floorPrice / 1e9; // Convert lamports to SOL\n  }\n\n  async getListings(symbol: string, limit = 20): Promise<NFTListing[]> {\n    const data = await this.fetch<MagicEdenListing[]>(\n      `/collections/${symbol}/listings?limit=${limit}`\n    );\n    if (!data) return [];\n\n    return data.map((listing) => ({\n      tokenId: listing.tokenMint ?? \"\",\n      price: (listing.price ?? 0) / 1e9,\n      currency: \"SOL\",\n      marketplace: \"magic-eden\",\n      seller: listing.seller ?? \"\",\n      expiresAt: listing.expiry ? new Date(listing.expiry * 1000) : undefined,\n    }));\n  }\n\n  async getHolders(symbol: string, limit = 20): Promise<WhaleHolder[]> {\n    const data = await this.fetch<MagicEdenHolder[]>(\n      `/collections/${symbol}/holder_stats?limit=${limit}`\n    );\n    if (!data) return [];\n\n    const totalTokens = data.reduce((sum, h) => sum + (h.tokenCount ?? 0), 0);\n\n    return data.map((holder) => ({\n      address: holder.owner ?? \"\",\n      balance: holder.tokenCount ?? 0,\n      percentage: totalTokens > 0\n        ? ((holder.tokenCount ?? 0) / totalTokens) * 100\n        : 0,\n    }));\n  }\n}\n","import type { NFT, RarityScore } from \"../types.js\";\n\ninterface TraitFrequency {\n  traitType: string;\n  value: string;\n  count: number;\n  frequency: number;\n}\n\nexport class RarityAnalyzer {\n  calculateCollectionRarity(nfts: NFT[]): Map<string, RarityScore> {\n    if (nfts.length === 0) return new Map();\n\n    // Calculate trait frequencies\n    const traitFrequencies = this.calculateTraitFrequencies(nfts);\n\n    // Calculate rarity scores for each NFT\n    const rarityScores = new Map<string, RarityScore>();\n    const scores: Array<{ tokenId: string; score: number }> = [];\n\n    for (const nft of nfts) {\n      const traitScores = this.calculateTraitScores(nft, traitFrequencies, nfts.length);\n      const totalScore = traitScores.reduce((sum, t) => sum + t.score, 0);\n\n      scores.push({ tokenId: nft.tokenId, score: totalScore });\n      rarityScores.set(nft.tokenId, {\n        tokenId: nft.tokenId,\n        rank: 0, // Will be set after sorting\n        score: totalScore,\n        traitScores,\n      });\n    }\n\n    // Sort by score (higher = rarer) and assign ranks\n    scores.sort((a, b) => b.score - a.score);\n    scores.forEach((item, index) => {\n      const rarityScore = rarityScores.get(item.tokenId);\n      if (rarityScore) {\n        rarityScore.rank = index + 1;\n      }\n    });\n\n    return rarityScores;\n  }\n\n  private calculateTraitFrequencies(nfts: NFT[]): TraitFrequency[] {\n    const traitCounts = new Map<string, number>();\n\n    for (const nft of nfts) {\n      const attributes = nft.metadata.attributes ?? [];\n      for (const attr of attributes) {\n        const key = `${attr.traitType}:${attr.value}`;\n        traitCounts.set(key, (traitCounts.get(key) ?? 0) + 1);\n      }\n    }\n\n    const frequencies: TraitFrequency[] = [];\n    for (const [key, count] of traitCounts) {\n      const [traitType, value] = key.split(\":\");\n      frequencies.push({\n        traitType: traitType ?? \"\",\n        value: value ?? \"\",\n        count,\n        frequency: count / nfts.length,\n      });\n    }\n\n    return frequencies;\n  }\n\n  private calculateTraitScores(\n    nft: NFT,\n    frequencies: TraitFrequency[],\n    totalNFTs: number\n  ): Array<{ traitType: string; value: string; rarity: number; score: number }> {\n    const attributes = nft.metadata.attributes ?? [];\n    const traitScores: Array<{\n      traitType: string;\n      value: string;\n      rarity: number;\n      score: number;\n    }> = [];\n\n    for (const attr of attributes) {\n      const frequency = frequencies.find(\n        (f) => f.traitType === attr.traitType && f.value === String(attr.value)\n      );\n\n      if (frequency) {\n        // Rarity score: 1 / frequency (rarer traits = higher score)\n        const rarity = frequency.frequency;\n        const score = 1 / frequency.frequency;\n\n        traitScores.push({\n          traitType: attr.traitType,\n          value: String(attr.value),\n          rarity,\n          score,\n        });\n      }\n    }\n\n    // Bonus for number of traits (statistical rarity)\n    const avgTraits = totalNFTs > 0\n      ? frequencies.length / totalNFTs\n      : attributes.length;\n\n    if (attributes.length !== avgTraits) {\n      const traitCountRarity = Math.abs(attributes.length - avgTraits) / avgTraits;\n      traitScores.push({\n        traitType: \"_trait_count\",\n        value: String(attributes.length),\n        rarity: traitCountRarity,\n        score: traitCountRarity * 10, // Weight for trait count bonus\n      });\n    }\n\n    return traitScores;\n  }\n\n  calculateSingleNFTRarity(\n    nft: NFT,\n    collectionNFTs: NFT[]\n  ): RarityScore | null {\n    const allScores = this.calculateCollectionRarity(collectionNFTs);\n    return allScores.get(nft.tokenId) ?? null;\n  }\n\n  getRarityTier(rank: number, totalSupply: number): string {\n    const percentile = (rank / totalSupply) * 100;\n\n    if (percentile <= 1) return \"Legendary\";\n    if (percentile <= 5) return \"Epic\";\n    if (percentile <= 15) return \"Rare\";\n    if (percentile <= 35) return \"Uncommon\";\n    return \"Common\";\n  }\n}\n","import type { NFTCollection, NFTListing, RarityScore } from \"../types.js\";\n\nexport interface PriceEstimate {\n  lowEstimate: number;\n  midEstimate: number;\n  highEstimate: number;\n  confidence: number;\n  factors: PriceFactor[];\n}\n\nexport interface PriceFactor {\n  name: string;\n  impact: number; // Multiplier (1.0 = no impact)\n  description: string;\n}\n\nexport interface MarketAnalysis {\n  floorPrice: number;\n  avgListingPrice: number;\n  medianListingPrice: number;\n  priceRange: { min: number; max: number };\n  volumeTrend: \"increasing\" | \"decreasing\" | \"stable\";\n  listingCount: number;\n}\n\nexport class PricingAnalyzer {\n  analyzeMarket(\n    collection: NFTCollection,\n    listings: NFTListing[]\n  ): MarketAnalysis {\n    const prices = listings.map((l) => l.price).sort((a, b) => a - b);\n\n    if (prices.length === 0) {\n      return {\n        floorPrice: collection.floorPrice ?? 0,\n        avgListingPrice: 0,\n        medianListingPrice: 0,\n        priceRange: { min: 0, max: 0 },\n        volumeTrend: \"stable\",\n        listingCount: 0,\n      };\n    }\n\n    const sum = prices.reduce((a, b) => a + b, 0);\n    const avg = sum / prices.length;\n    const median = prices.length % 2 === 0\n      ? (prices[prices.length / 2 - 1]! + prices[prices.length / 2]!) / 2\n      : prices[Math.floor(prices.length / 2)]!;\n\n    return {\n      floorPrice: collection.floorPrice ?? prices[0] ?? 0,\n      avgListingPrice: avg,\n      medianListingPrice: median,\n      priceRange: { min: prices[0] ?? 0, max: prices[prices.length - 1] ?? 0 },\n      volumeTrend: this.determineVolumeTrend(collection),\n      listingCount: listings.length,\n    };\n  }\n\n  private determineVolumeTrend(\n    collection: NFTCollection\n  ): \"increasing\" | \"decreasing\" | \"stable\" {\n    // Would need historical data for real trend analysis\n    // For now, return stable as default\n    return \"stable\";\n  }\n\n  estimatePrice(\n    rarity: RarityScore | null,\n    market: MarketAnalysis,\n    collection: NFTCollection\n  ): PriceEstimate {\n    const factors: PriceFactor[] = [];\n    let basePrice = market.floorPrice || 0;\n    let multiplier = 1.0;\n\n    // Rarity factor\n    if (rarity && collection.totalSupply > 0) {\n      const rarityPercentile = (rarity.rank / collection.totalSupply) * 100;\n      let rarityMultiplier = 1.0;\n\n      if (rarityPercentile <= 1) {\n        rarityMultiplier = 5.0; // Top 1%\n      } else if (rarityPercentile <= 5) {\n        rarityMultiplier = 3.0; // Top 5%\n      } else if (rarityPercentile <= 15) {\n        rarityMultiplier = 1.8; // Top 15%\n      } else if (rarityPercentile <= 35) {\n        rarityMultiplier = 1.3; // Top 35%\n      }\n\n      factors.push({\n        name: \"Rarity\",\n        impact: rarityMultiplier,\n        description: `Rank ${rarity.rank}/${collection.totalSupply} (top ${rarityPercentile.toFixed(1)}%)`,\n      });\n      multiplier *= rarityMultiplier;\n    }\n\n    // Market depth factor\n    if (market.listingCount > 0) {\n      const listingRatio = market.listingCount / Math.max(collection.totalSupply, 1);\n      let liquidityMultiplier = 1.0;\n\n      if (listingRatio < 0.05) {\n        liquidityMultiplier = 1.2; // Low supply premium\n        factors.push({\n          name: \"Low Supply\",\n          impact: liquidityMultiplier,\n          description: `Only ${(listingRatio * 100).toFixed(1)}% listed`,\n        });\n      } else if (listingRatio > 0.3) {\n        liquidityMultiplier = 0.9; // High supply discount\n        factors.push({\n          name: \"High Supply\",\n          impact: liquidityMultiplier,\n          description: `${(listingRatio * 100).toFixed(1)}% of collection listed`,\n        });\n      }\n      multiplier *= liquidityMultiplier;\n    }\n\n    // Volume trend factor\n    if (market.volumeTrend === \"increasing\") {\n      factors.push({\n        name: \"Rising Demand\",\n        impact: 1.1,\n        description: \"Volume trending upward\",\n      });\n      multiplier *= 1.1;\n    } else if (market.volumeTrend === \"decreasing\") {\n      factors.push({\n        name: \"Falling Demand\",\n        impact: 0.9,\n        description: \"Volume trending downward\",\n      });\n      multiplier *= 0.9;\n    }\n\n    const estimatedPrice = basePrice * multiplier;\n\n    // Calculate confidence based on data availability\n    let confidence = 0.5;\n    if (market.listingCount >= 10) confidence += 0.2;\n    if (rarity) confidence += 0.2;\n    if (market.floorPrice > 0) confidence += 0.1;\n\n    return {\n      lowEstimate: estimatedPrice * 0.8,\n      midEstimate: estimatedPrice,\n      highEstimate: estimatedPrice * 1.5,\n      confidence: Math.min(confidence, 1.0),\n      factors,\n    };\n  }\n\n  suggestListingPrice(\n    estimate: PriceEstimate,\n    strategy: \"aggressive\" | \"moderate\" | \"conservative\" = \"moderate\"\n  ): number {\n    switch (strategy) {\n      case \"aggressive\":\n        return estimate.highEstimate;\n      case \"conservative\":\n        return estimate.lowEstimate;\n      case \"moderate\":\n      default:\n        return estimate.midEstimate;\n    }\n  }\n}\n"],"mappings":"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","names":["z","z"]}