{"version":3,"sources":["../src/social-agent.ts","../src/types.ts","../src/platforms/twitter.ts","../src/platforms/telegram.ts","../src/platforms/discord.ts","../src/platforms/farcaster.ts","../src/analyzers/sentiment.ts","../src/analyzers/influencer.ts"],"sourcesContent":["import { z } from \"zod\";\nimport {\n  BaseAgent,\n  type AgentConfig,\n  type AgentContext,\n  type AgentResult,\n  type LLMClient,\n  createLLMClient,\n} from \"@gicm/agent-core\";\nimport type {\n  SocialAgentConfig,\n  SocialPost,\n  SocialUser,\n  SentimentAnalysis,\n  TrendingTopic,\n  SocialPlatform,\n  Influencer,\n} from \"./types.js\";\nimport { SocialAgentConfigSchema } from \"./types.js\";\nimport { TwitterProvider } from \"./platforms/twitter.js\";\nimport { TelegramProvider } from \"./platforms/telegram.js\";\nimport { DiscordProvider } from \"./platforms/discord.js\";\nimport { FarcasterProvider } from \"./platforms/farcaster.js\";\nimport { SentimentAnalyzer } from \"./analyzers/sentiment.js\";\nimport { InfluencerAnalyzer } from \"./analyzers/influencer.js\";\n\nexport interface SocialAgentAnalysis {\n  posts?: SocialPost[];\n  user?: SocialUser;\n  sentiment?: SentimentAnalysis;\n  influencer?: Influencer;\n  trending?: TrendingTopic[];\n  aiSummary?: string;\n}\n\nexport class SocialAgent extends BaseAgent {\n  private platforms: Map<string, SocialPlatform> = new Map();\n  private sentimentAnalyzer: SentimentAnalyzer;\n  private influencerAnalyzer: InfluencerAnalyzer;\n  private socialConfig: SocialAgentConfig;\n  private llmClient?: LLMClient;\n\n  constructor(config: SocialAgentConfig & AgentConfig) {\n    const validatedConfig = SocialAgentConfigSchema.parse(config);\n    super(\"social-agent\", config);\n\n    this.socialConfig = validatedConfig;\n\n    // Initialize LLM client if API key provided\n    if (config.apiKey) {\n      this.llmClient = createLLMClient({\n        provider: config.llmProvider ?? \"openai\",\n        model: config.llmModel,\n        apiKey: config.apiKey,\n        temperature: config.temperature ?? 0.7,\n        maxTokens: config.maxTokens ?? 4096,\n      });\n    }\n\n    this.sentimentAnalyzer = new SentimentAnalyzer(this.llmClient);\n    this.influencerAnalyzer = new InfluencerAnalyzer();\n\n    this.initializePlatforms(validatedConfig);\n    this.initializeTools();\n  }\n\n  private initializePlatforms(config: SocialAgentConfig): void {\n    if (config.twitter?.bearerToken) {\n      this.platforms.set(\"twitter\", new TwitterProvider({\n        bearerToken: config.twitter.bearerToken,\n      }));\n    }\n\n    if (config.telegram?.botToken) {\n      this.platforms.set(\"telegram\", new TelegramProvider({\n        botToken: config.telegram.botToken,\n      }));\n    }\n\n    if (config.discord?.botToken || config.discord?.webhookUrl) {\n      this.platforms.set(\"discord\", new DiscordProvider({\n        botToken: config.discord.botToken,\n        webhookUrl: config.discord.webhookUrl,\n      }));\n    }\n\n    if (config.farcaster?.apiKey) {\n      this.platforms.set(\"farcaster\", new FarcasterProvider({\n        apiKey: config.farcaster.apiKey,\n        signerUuid: config.farcaster.signerUuid,\n      }));\n    }\n  }\n\n  private initializeTools(): void {\n    this.registerTool({\n      name: \"search_posts\",\n      description: \"Search for posts across social platforms\",\n      parameters: z.object({\n        query: z.string().describe(\"Search query\"),\n        platform: z.string().default(\"twitter\").describe(\"Platform: twitter, telegram, discord, farcaster\"),\n        limit: z.number().default(50).describe(\"Max posts to return\"),\n      }),\n      execute: async (params) => {\n        const { query, platform, limit } = params as {\n          query: string;\n          platform: string;\n          limit: number;\n        };\n        return this.searchPosts(query, platform, limit);\n      },\n    });\n\n    this.registerTool({\n      name: \"analyze_sentiment\",\n      description: \"Analyze sentiment for a topic or token\",\n      parameters: z.object({\n        query: z.string().describe(\"Topic or token to analyze\"),\n        platform: z.string().default(\"twitter\").describe(\"Platform to search\"),\n      }),\n      execute: async (params) => {\n        const { query, platform } = params as { query: string; platform: string };\n        return this.analyzeSentiment(query, platform);\n      },\n    });\n\n    this.registerTool({\n      name: \"get_user\",\n      description: \"Get user profile information\",\n      parameters: z.object({\n        username: z.string().describe(\"Username to lookup\"),\n        platform: z.string().default(\"twitter\").describe(\"Platform name\"),\n      }),\n      execute: async (params) => {\n        const { username, platform } = params as { username: string; platform: string };\n        return this.getUser(username, platform);\n      },\n    });\n\n    this.registerTool({\n      name: \"analyze_influencer\",\n      description: \"Analyze an influencer's metrics and content\",\n      parameters: z.object({\n        username: z.string().describe(\"Username to analyze\"),\n        platform: z.string().default(\"twitter\").describe(\"Platform name\"),\n      }),\n      execute: async (params) => {\n        const { username, platform } = params as { username: string; platform: string };\n        return this.analyzeInfluencer(username, platform);\n      },\n    });\n\n    this.registerTool({\n      name: \"generate_post\",\n      description: \"Generate social media post content with AI\",\n      parameters: z.object({\n        topic: z.string().describe(\"Topic to write about\"),\n        style: z.string().default(\"professional\").describe(\"Style: professional, casual, hype\"),\n        platform: z.string().default(\"twitter\").describe(\"Target platform\"),\n      }),\n      execute: async (params) => {\n        const { topic, style, platform } = params as {\n          topic: string;\n          style: string;\n          platform: string;\n        };\n        return this.generatePost(topic, style, platform);\n      },\n    });\n  }\n\n  getSystemPrompt(): string {\n    return `You are a Web3 social media expert. You can:\n- Search and analyze social media posts across platforms\n- Track sentiment for tokens and projects\n- Analyze influencers and their engagement\n- Generate social media content\n- Monitor whale alerts and community activity\n\nAvailable platforms: ${Array.from(this.platforms.keys()).join(\", \")}\n\nWhen analyzing sentiment, consider:\n1. Overall community mood\n2. Influencer opinions\n3. Volume of discussion\n4. Historical sentiment trends\n5. Potential manipulation (bots, coordinated posts)`;\n  }\n\n  async analyze(context: AgentContext): Promise<AgentResult> {\n    const query = context.userQuery ?? \"\";\n\n    if (!this.llmClient) {\n      return this.createResult(\n        false,\n        null,\n        \"LLM client not configured. Provide apiKey in config.\",\n        0,\n        \"No LLM available for AI analysis\"\n      );\n    }\n\n    try {\n      const response = await this.llmClient.chat([\n        { role: \"system\", content: this.getSystemPrompt() },\n        { role: \"user\", content: query },\n      ]);\n\n      return this.createResult(\n        true,\n        { aiSummary: response.content },\n        undefined,\n        0.8,\n        \"AI analysis completed\"\n      );\n    } catch (error) {\n      return this.createResult(\n        false,\n        null,\n        error instanceof Error ? error.message : \"Unknown error\",\n        0,\n        \"Failed to complete AI analysis\"\n      );\n    }\n  }\n\n  async searchPosts(\n    query: string,\n    platformName = \"twitter\",\n    limit = 50\n  ): Promise<SocialPost[]> {\n    const platform = this.platforms.get(platformName);\n    if (!platform) {\n      this.log(`Platform ${platformName} not configured`);\n      return [];\n    }\n    return platform.searchPosts(query, limit);\n  }\n\n  async getUser(username: string, platformName = \"twitter\"): Promise<SocialUser | null> {\n    const platform = this.platforms.get(platformName);\n    if (!platform) return null;\n    return platform.getUser(username);\n  }\n\n  async getUserPosts(\n    userId: string,\n    platformName = \"twitter\",\n    limit = 50\n  ): Promise<SocialPost[]> {\n    const platform = this.platforms.get(platformName);\n    if (!platform) return [];\n    return platform.getUserPosts(userId, limit);\n  }\n\n  async analyzeSentiment(\n    query: string,\n    platformName = \"twitter\"\n  ): Promise<SentimentAnalysis | null> {\n    const posts = await this.searchPosts(query, platformName, 100);\n    if (posts.length === 0) return null;\n    return this.sentimentAnalyzer.analyzeSentiment(posts);\n  }\n\n  async analyzeInfluencer(\n    username: string,\n    platformName = \"twitter\"\n  ): Promise<Influencer | null> {\n    const platform = this.platforms.get(platformName);\n    if (!platform) return null;\n\n    const user = await platform.getUser(username);\n    if (!user) return null;\n\n    const posts = await platform.getUserPosts(user.id, 100);\n    return this.influencerAnalyzer.analyzeInfluencer(user, posts);\n  }\n\n  async generatePost(\n    topic: string,\n    style = \"professional\",\n    platformName = \"twitter\"\n  ): Promise<string> {\n    if (!this.llmClient) {\n      return `Check out ${topic}! üöÄ`;\n    }\n\n    const charLimit = platformName === \"twitter\" ? 280 : 1000;\n\n    const response = await this.llmClient.chat([\n      {\n        role: \"system\",\n        content: `Generate a ${style} social media post about ${topic} for ${platformName}.\nMax ${charLimit} characters. Include relevant hashtags and emojis.\nMake it engaging and authentic to the Web3 community.`,\n      },\n      {\n        role: \"user\",\n        content: `Write a ${style} post about: ${topic}`,\n      },\n    ]);\n\n    return response.content.slice(0, charLimit);\n  }\n\n  async getSentimentTrend(\n    query: string,\n    platformName = \"twitter\",\n    intervalHours = 6\n  ): Promise<Array<{ timestamp: Date; sentiment: number; postCount: number }>> {\n    const posts = await this.searchPosts(query, platformName, 200);\n    return this.sentimentAnalyzer.analyzeByTime(posts, intervalHours);\n  }\n\n  async postToAll(\n    content: string,\n    platforms?: string[]\n  ): Promise<Map<string, SocialPost | null>> {\n    const results = new Map<string, SocialPost | null>();\n    const targetPlatforms = platforms ?? Array.from(this.platforms.keys());\n\n    for (const platformName of targetPlatforms) {\n      const platform = this.platforms.get(platformName);\n      if (platform?.postMessage) {\n        try {\n          const post = await platform.postMessage(content);\n          results.set(platformName, post);\n        } catch {\n          results.set(platformName, null);\n        }\n      } else {\n        results.set(platformName, null);\n      }\n    }\n\n    return results;\n  }\n}\n","import { z } from \"zod\";\n\nexport const SocialAgentConfigSchema = z.object({\n  twitter: z.object({\n    apiKey: z.string().optional(),\n    apiSecret: z.string().optional(),\n    accessToken: z.string().optional(),\n    accessSecret: z.string().optional(),\n    bearerToken: z.string().optional(),\n  }).optional(),\n  telegram: z.object({\n    botToken: z.string().optional(),\n  }).optional(),\n  discord: z.object({\n    botToken: z.string().optional(),\n    webhookUrl: z.string().optional(),\n  }).optional(),\n  farcaster: z.object({\n    apiKey: z.string().optional(),\n    signerUuid: z.string().optional(),\n  }).optional(),\n});\n\nexport type SocialAgentConfig = z.infer<typeof SocialAgentConfigSchema>;\n\nexport interface SocialPost {\n  id: string;\n  platform: \"twitter\" | \"telegram\" | \"discord\" | \"farcaster\";\n  author: string;\n  authorId: string;\n  content: string;\n  timestamp: Date;\n  likes?: number;\n  reposts?: number;\n  replies?: number;\n  url?: string;\n  media?: Array<{\n    type: \"image\" | \"video\" | \"gif\";\n    url: string;\n  }>;\n  mentions?: string[];\n  hashtags?: string[];\n}\n\nexport interface SocialUser {\n  id: string;\n  platform: \"twitter\" | \"telegram\" | \"discord\" | \"farcaster\";\n  username: string;\n  displayName: string;\n  bio?: string;\n  followers: number;\n  following: number;\n  verified?: boolean;\n  avatar?: string;\n  url?: string;\n}\n\nexport interface Influencer extends SocialUser {\n  engagementRate: number;\n  avgLikes: number;\n  avgReposts: number;\n  topics: string[];\n  recentPosts: SocialPost[];\n}\n\nexport interface SentimentAnalysis {\n  score: number; // -1 to 1\n  label: \"bullish\" | \"bearish\" | \"neutral\";\n  confidence: number;\n  keywords: Array<{ word: string; sentiment: number }>;\n  samplePosts: SocialPost[];\n}\n\nexport interface TrendingTopic {\n  topic: string;\n  volume: number;\n  change24h: number;\n  sentiment: number;\n  relatedTokens?: string[];\n}\n\nexport interface WhaleAlert {\n  type: \"buy\" | \"sell\" | \"transfer\" | \"mint\";\n  token: string;\n  amount: number;\n  valueUsd: number;\n  from: string;\n  to?: string;\n  txHash: string;\n  timestamp: Date;\n}\n\nexport interface SocialPlatform {\n  name: string;\n  platform: \"twitter\" | \"telegram\" | \"discord\" | \"farcaster\";\n\n  searchPosts(query: string, limit?: number): Promise<SocialPost[]>;\n  getUser(username: string): Promise<SocialUser | null>;\n  getUserPosts(userId: string, limit?: number): Promise<SocialPost[]>;\n  postMessage?(content: string, options?: PostOptions): Promise<SocialPost | null>;\n}\n\nexport interface PostOptions {\n  replyTo?: string;\n  media?: Array<{ type: string; url: string }>;\n  mentions?: string[];\n}\n","import type { SocialPlatform, SocialPost, SocialUser, PostOptions } from \"../types.js\";\n\ninterface TwitterConfig {\n  bearerToken?: string;\n  apiKey?: string;\n  apiSecret?: string;\n  accessToken?: string;\n  accessSecret?: string;\n}\n\ninterface TwitterTweet {\n  id: string;\n  text: string;\n  author_id: string;\n  created_at: string;\n  public_metrics?: {\n    like_count: number;\n    retweet_count: number;\n    reply_count: number;\n  };\n  entities?: {\n    mentions?: Array<{ username: string }>;\n    hashtags?: Array<{ tag: string }>;\n  };\n}\n\ninterface TwitterUser {\n  id: string;\n  username: string;\n  name: string;\n  description?: string;\n  public_metrics?: {\n    followers_count: number;\n    following_count: number;\n  };\n  verified?: boolean;\n  profile_image_url?: string;\n}\n\ninterface TwitterResponse<T> {\n  data?: T;\n  includes?: {\n    users?: TwitterUser[];\n  };\n  errors?: Array<{ message: string }>;\n}\n\nexport class TwitterProvider implements SocialPlatform {\n  name = \"twitter\";\n  platform = \"twitter\" as const;\n  private bearerToken?: string;\n  private baseUrl = \"https://api.twitter.com/2\";\n\n  constructor(config: TwitterConfig) {\n    this.bearerToken = config.bearerToken;\n  }\n\n  private async fetch<T>(endpoint: string, options?: RequestInit): Promise<T | null> {\n    if (!this.bearerToken) {\n      console.error(\"Twitter bearer token not configured\");\n      return null;\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        ...options,\n        headers: {\n          Authorization: `Bearer ${this.bearerToken}`,\n          \"Content-Type\": \"application/json\",\n          ...options?.headers,\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`Twitter API error: ${response.status}`);\n        return null;\n      }\n\n      return (await response.json()) as T;\n    } catch (error) {\n      console.error(\"Twitter fetch failed:\", error);\n      return null;\n    }\n  }\n\n  async searchPosts(query: string, limit = 50): Promise<SocialPost[]> {\n    const params = new URLSearchParams({\n      query,\n      max_results: Math.min(limit, 100).toString(),\n      \"tweet.fields\": \"created_at,public_metrics,entities,author_id\",\n      expansions: \"author_id\",\n      \"user.fields\": \"username\",\n    });\n\n    const response = await this.fetch<TwitterResponse<TwitterTweet[]>>(\n      `/tweets/search/recent?${params}`\n    );\n\n    if (!response?.data) return [];\n\n    const userMap = new Map<string, TwitterUser>();\n    response.includes?.users?.forEach((u) => userMap.set(u.id, u));\n\n    return response.data.map((tweet) => {\n      const author = userMap.get(tweet.author_id);\n      return {\n        id: tweet.id,\n        platform: \"twitter\" as const,\n        author: author?.username ?? \"\",\n        authorId: tweet.author_id,\n        content: tweet.text,\n        timestamp: new Date(tweet.created_at),\n        likes: tweet.public_metrics?.like_count,\n        reposts: tweet.public_metrics?.retweet_count,\n        replies: tweet.public_metrics?.reply_count,\n        url: `https://twitter.com/${author?.username}/status/${tweet.id}`,\n        mentions: tweet.entities?.mentions?.map((m) => m.username),\n        hashtags: tweet.entities?.hashtags?.map((h) => h.tag),\n      };\n    });\n  }\n\n  async getUser(username: string): Promise<SocialUser | null> {\n    const params = new URLSearchParams({\n      \"user.fields\": \"description,public_metrics,verified,profile_image_url\",\n    });\n\n    const response = await this.fetch<TwitterResponse<TwitterUser>>(\n      `/users/by/username/${username}?${params}`\n    );\n\n    if (!response?.data) return null;\n\n    const user = response.data;\n    return {\n      id: user.id,\n      platform: \"twitter\",\n      username: user.username,\n      displayName: user.name,\n      bio: user.description,\n      followers: user.public_metrics?.followers_count ?? 0,\n      following: user.public_metrics?.following_count ?? 0,\n      verified: user.verified,\n      avatar: user.profile_image_url,\n      url: `https://twitter.com/${user.username}`,\n    };\n  }\n\n  async getUserPosts(userId: string, limit = 50): Promise<SocialPost[]> {\n    const params = new URLSearchParams({\n      max_results: Math.min(limit, 100).toString(),\n      \"tweet.fields\": \"created_at,public_metrics,entities\",\n      expansions: \"author_id\",\n      \"user.fields\": \"username\",\n    });\n\n    const response = await this.fetch<TwitterResponse<TwitterTweet[]>>(\n      `/users/${userId}/tweets?${params}`\n    );\n\n    if (!response?.data) return [];\n\n    const author = response.includes?.users?.[0];\n\n    return response.data.map((tweet) => ({\n      id: tweet.id,\n      platform: \"twitter\" as const,\n      author: author?.username ?? \"\",\n      authorId: tweet.author_id,\n      content: tweet.text,\n      timestamp: new Date(tweet.created_at),\n      likes: tweet.public_metrics?.like_count,\n      reposts: tweet.public_metrics?.retweet_count,\n      replies: tweet.public_metrics?.reply_count,\n      url: `https://twitter.com/${author?.username}/status/${tweet.id}`,\n      mentions: tweet.entities?.mentions?.map((m) => m.username),\n      hashtags: tweet.entities?.hashtags?.map((h) => h.tag),\n    }));\n  }\n\n  async postMessage(_content: string, _options?: PostOptions): Promise<SocialPost | null> {\n    // Would require OAuth 1.0a authentication\n    // Simplified placeholder\n    console.warn(\"Twitter posting requires OAuth 1.0a authentication\");\n    return null;\n  }\n}\n","import type { SocialPlatform, SocialPost, SocialUser, PostOptions } from \"../types.js\";\n\ninterface TelegramConfig {\n  botToken?: string;\n}\n\ninterface TelegramMessage {\n  message_id: number;\n  from?: {\n    id: number;\n    username?: string;\n    first_name?: string;\n  };\n  chat: {\n    id: number;\n    type: string;\n    title?: string;\n    username?: string;\n  };\n  date: number;\n  text?: string;\n}\n\ninterface TelegramChat {\n  id: number;\n  type: string;\n  title?: string;\n  username?: string;\n  description?: string;\n  photo?: { small_file_id: string };\n}\n\ninterface TelegramChatMemberCount {\n  result: number;\n}\n\ninterface TelegramResponse<T> {\n  ok: boolean;\n  result?: T;\n  description?: string;\n}\n\nexport class TelegramProvider implements SocialPlatform {\n  name = \"telegram\";\n  platform = \"telegram\" as const;\n  private botToken?: string;\n  private baseUrl = \"https://api.telegram.org/bot\";\n\n  constructor(config: TelegramConfig) {\n    this.botToken = config.botToken;\n  }\n\n  private async fetch<T>(method: string, params?: Record<string, unknown>): Promise<T | null> {\n    if (!this.botToken) {\n      console.error(\"Telegram bot token not configured\");\n      return null;\n    }\n\n    try {\n      const url = `${this.baseUrl}${this.botToken}/${method}`;\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: params ? JSON.stringify(params) : undefined,\n      });\n\n      const data = (await response.json()) as TelegramResponse<T>;\n      if (!data.ok) {\n        console.error(`Telegram API error: ${data.description}`);\n        return null;\n      }\n\n      return data.result ?? null;\n    } catch (error) {\n      console.error(\"Telegram fetch failed:\", error);\n      return null;\n    }\n  }\n\n  async searchPosts(_query: string, _limit = 50): Promise<SocialPost[]> {\n    // Telegram doesn't have a public search API\n    // Would need to use userbot or third-party services\n    console.warn(\"Telegram public search not available via Bot API\");\n    return [];\n  }\n\n  async getUser(username: string): Promise<SocialUser | null> {\n    // Get chat info for channels/groups\n    const chat = await this.fetch<TelegramChat>(\"getChat\", {\n      chat_id: `@${username}`,\n    });\n\n    if (!chat) return null;\n\n    // Get member count\n    const memberCount = await this.fetch<TelegramChatMemberCount[\"result\"]>(\n      \"getChatMemberCount\",\n      { chat_id: `@${username}` }\n    );\n\n    return {\n      id: chat.id.toString(),\n      platform: \"telegram\",\n      username: chat.username ?? username,\n      displayName: chat.title ?? username,\n      bio: chat.description,\n      followers: memberCount ?? 0,\n      following: 0,\n      url: `https://t.me/${chat.username ?? username}`,\n    };\n  }\n\n  async getUserPosts(_userId: string, _limit = 50): Promise<SocialPost[]> {\n    // Bot API doesn't provide message history\n    // Would need to use userbot\n    console.warn(\"Telegram message history not available via Bot API\");\n    return [];\n  }\n\n  async postMessage(\n    content: string,\n    options?: PostOptions & { chatId?: string | number }\n  ): Promise<SocialPost | null> {\n    const chatId = (options as { chatId?: string | number } | undefined)?.chatId;\n    if (!chatId) {\n      console.error(\"Chat ID required for Telegram posting\");\n      return null;\n    }\n\n    const message = await this.fetch<TelegramMessage>(\"sendMessage\", {\n      chat_id: chatId,\n      text: content,\n      reply_to_message_id: options?.replyTo ? parseInt(options.replyTo) : undefined,\n    });\n\n    if (!message) return null;\n\n    return {\n      id: message.message_id.toString(),\n      platform: \"telegram\",\n      author: message.from?.username ?? \"\",\n      authorId: message.from?.id.toString() ?? \"\",\n      content: message.text ?? \"\",\n      timestamp: new Date(message.date * 1000),\n    };\n  }\n\n  async sendAlert(chatId: string | number, alert: {\n    title: string;\n    message: string;\n    type?: \"info\" | \"warning\" | \"critical\";\n  }): Promise<boolean> {\n    const emoji = {\n      info: \"‚ÑπÔ∏è\",\n      warning: \"‚ö†Ô∏è\",\n      critical: \"üö®\",\n    };\n\n    const text = `${emoji[alert.type ?? \"info\"]} *${alert.title}*\\n\\n${alert.message}`;\n\n    const result = await this.fetch<TelegramMessage>(\"sendMessage\", {\n      chat_id: chatId,\n      text,\n      parse_mode: \"Markdown\",\n    });\n\n    return result !== null;\n  }\n}\n","import type { SocialPlatform, SocialPost, SocialUser, PostOptions } from \"../types.js\";\n\ninterface DiscordConfig {\n  botToken?: string;\n  webhookUrl?: string;\n}\n\ninterface DiscordUser {\n  id: string;\n  username: string;\n  discriminator: string;\n  avatar?: string;\n  bot?: boolean;\n}\n\ninterface DiscordGuild {\n  id: string;\n  name: string;\n  icon?: string;\n  description?: string;\n  approximate_member_count?: number;\n}\n\ninterface DiscordMessage {\n  id: string;\n  channel_id: string;\n  author: DiscordUser;\n  content: string;\n  timestamp: string;\n  reactions?: Array<{\n    count: number;\n    emoji: { name: string };\n  }>;\n  mentions?: DiscordUser[];\n}\n\ninterface DiscordWebhookPayload {\n  content?: string;\n  username?: string;\n  avatar_url?: string;\n  embeds?: Array<{\n    title?: string;\n    description?: string;\n    color?: number;\n    fields?: Array<{ name: string; value: string; inline?: boolean }>;\n    footer?: { text: string };\n    timestamp?: string;\n  }>;\n}\n\nexport class DiscordProvider implements SocialPlatform {\n  name = \"discord\";\n  platform = \"discord\" as const;\n  private botToken?: string;\n  private webhookUrl?: string;\n  private baseUrl = \"https://discord.com/api/v10\";\n\n  constructor(config: DiscordConfig) {\n    this.botToken = config.botToken;\n    this.webhookUrl = config.webhookUrl;\n  }\n\n  private async fetch<T>(endpoint: string, options?: RequestInit): Promise<T | null> {\n    if (!this.botToken) {\n      console.error(\"Discord bot token not configured\");\n      return null;\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        ...options,\n        headers: {\n          Authorization: `Bot ${this.botToken}`,\n          \"Content-Type\": \"application/json\",\n          ...options?.headers,\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`Discord API error: ${response.status}`);\n        return null;\n      }\n\n      return (await response.json()) as T;\n    } catch (error) {\n      console.error(\"Discord fetch failed:\", error);\n      return null;\n    }\n  }\n\n  async searchPosts(_query: string, _limit = 50): Promise<SocialPost[]> {\n    // Discord doesn't have a public search API for bots\n    // Would need specific channel access\n    console.warn(\"Discord search requires channel-specific access\");\n    return [];\n  }\n\n  async getUser(userId: string): Promise<SocialUser | null> {\n    const user = await this.fetch<DiscordUser>(`/users/${userId}`);\n    if (!user) return null;\n\n    return {\n      id: user.id,\n      platform: \"discord\",\n      username: user.username,\n      displayName: `${user.username}#${user.discriminator}`,\n      followers: 0,\n      following: 0,\n      avatar: user.avatar\n        ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`\n        : undefined,\n    };\n  }\n\n  async getUserPosts(_userId: string, _limit = 50): Promise<SocialPost[]> {\n    // Would need to search through channels the user has posted in\n    console.warn(\"Discord user posts require channel access\");\n    return [];\n  }\n\n  async getChannelMessages(channelId: string, limit = 50): Promise<SocialPost[]> {\n    const messages = await this.fetch<DiscordMessage[]>(\n      `/channels/${channelId}/messages?limit=${Math.min(limit, 100)}`\n    );\n\n    if (!messages) return [];\n\n    return messages.map((msg) => ({\n      id: msg.id,\n      platform: \"discord\" as const,\n      author: msg.author.username,\n      authorId: msg.author.id,\n      content: msg.content,\n      timestamp: new Date(msg.timestamp),\n      likes: msg.reactions?.reduce((sum, r) => sum + r.count, 0),\n      mentions: msg.mentions?.map((m) => m.username),\n    }));\n  }\n\n  async postMessage(\n    content: string,\n    options?: PostOptions & { channelId?: string }\n  ): Promise<SocialPost | null> {\n    const channelId = (options as { channelId?: string } | undefined)?.channelId;\n    if (!channelId) {\n      console.error(\"Channel ID required for Discord posting\");\n      return null;\n    }\n\n    const message = await this.fetch<DiscordMessage>(`/channels/${channelId}/messages`, {\n      method: \"POST\",\n      body: JSON.stringify({\n        content,\n        message_reference: options?.replyTo\n          ? { message_id: options.replyTo }\n          : undefined,\n      }),\n    });\n\n    if (!message) return null;\n\n    return {\n      id: message.id,\n      platform: \"discord\",\n      author: message.author.username,\n      authorId: message.author.id,\n      content: message.content,\n      timestamp: new Date(message.timestamp),\n    };\n  }\n\n  async sendWebhook(payload: DiscordWebhookPayload): Promise<boolean> {\n    if (!this.webhookUrl) {\n      console.error(\"Discord webhook URL not configured\");\n      return false;\n    }\n\n    try {\n      const response = await fetch(this.webhookUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error(\"Discord webhook failed:\", error);\n      return false;\n    }\n  }\n\n  async sendAlert(alert: {\n    title: string;\n    description: string;\n    color?: number;\n    fields?: Array<{ name: string; value: string; inline?: boolean }>;\n    footer?: string;\n  }): Promise<boolean> {\n    return this.sendWebhook({\n      embeds: [\n        {\n          title: alert.title,\n          description: alert.description,\n          color: alert.color ?? 0x5865f2, // Discord blurple\n          fields: alert.fields,\n          footer: alert.footer ? { text: alert.footer } : undefined,\n          timestamp: new Date().toISOString(),\n        },\n      ],\n    });\n  }\n\n  async getGuild(guildId: string): Promise<DiscordGuild | null> {\n    return this.fetch<DiscordGuild>(`/guilds/${guildId}?with_counts=true`);\n  }\n}\n","import type { SocialPlatform, SocialPost, SocialUser, PostOptions } from \"../types.js\";\n\ninterface FarcasterConfig {\n  apiKey?: string;\n  signerUuid?: string;\n}\n\ninterface FarcasterCast {\n  hash: string;\n  author: {\n    fid: number;\n    username: string;\n    display_name: string;\n    pfp_url?: string;\n    follower_count?: number;\n    following_count?: number;\n  };\n  text: string;\n  timestamp: string;\n  reactions?: {\n    likes_count: number;\n    recasts_count: number;\n  };\n  replies?: {\n    count: number;\n  };\n  mentioned_profiles?: Array<{ username: string }>;\n  embeds?: Array<{ url?: string }>;\n}\n\ninterface FarcasterUser {\n  fid: number;\n  username: string;\n  display_name: string;\n  pfp_url?: string;\n  profile?: {\n    bio?: {\n      text?: string;\n    };\n  };\n  follower_count: number;\n  following_count: number;\n  verifications?: string[];\n}\n\ninterface NeynarResponse<T> {\n  result?: T;\n  users?: T;\n  casts?: T;\n}\n\nexport class FarcasterProvider implements SocialPlatform {\n  name = \"farcaster\";\n  platform = \"farcaster\" as const;\n  private apiKey?: string;\n  private signerUuid?: string;\n  private baseUrl = \"https://api.neynar.com/v2/farcaster\";\n\n  constructor(config: FarcasterConfig) {\n    this.apiKey = config.apiKey;\n    this.signerUuid = config.signerUuid;\n  }\n\n  private async fetch<T>(endpoint: string, options?: RequestInit): Promise<T | null> {\n    if (!this.apiKey) {\n      console.error(\"Farcaster API key not configured\");\n      return null;\n    }\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        ...options,\n        headers: {\n          accept: \"application/json\",\n          api_key: this.apiKey,\n          \"Content-Type\": \"application/json\",\n          ...options?.headers,\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`Farcaster API error: ${response.status}`);\n        return null;\n      }\n\n      return (await response.json()) as T;\n    } catch (error) {\n      console.error(\"Farcaster fetch failed:\", error);\n      return null;\n    }\n  }\n\n  async searchPosts(query: string, limit = 50): Promise<SocialPost[]> {\n    const response = await this.fetch<NeynarResponse<FarcasterCast[]>>(\n      `/cast/search?q=${encodeURIComponent(query)}&limit=${Math.min(limit, 100)}`\n    );\n\n    const casts = response?.result ?? response?.casts ?? [];\n    if (!Array.isArray(casts)) return [];\n\n    return casts.map((cast) => this.mapCast(cast));\n  }\n\n  private mapCast(cast: FarcasterCast): SocialPost {\n    return {\n      id: cast.hash,\n      platform: \"farcaster\",\n      author: cast.author.username,\n      authorId: cast.author.fid.toString(),\n      content: cast.text,\n      timestamp: new Date(cast.timestamp),\n      likes: cast.reactions?.likes_count,\n      reposts: cast.reactions?.recasts_count,\n      replies: cast.replies?.count,\n      url: `https://warpcast.com/${cast.author.username}/${cast.hash.slice(0, 10)}`,\n      mentions: cast.mentioned_profiles?.map((p) => p.username),\n      media: cast.embeds\n        ?.filter((e) => e.url?.match(/\\.(jpg|jpeg|png|gif|webp)$/i))\n        .map((e) => ({ type: \"image\" as const, url: e.url! })),\n    };\n  }\n\n  async getUser(username: string): Promise<SocialUser | null> {\n    const response = await this.fetch<NeynarResponse<FarcasterUser[]>>(\n      `/user/by_username?username=${username}`\n    );\n\n    const users = response?.result ?? response?.users;\n    const user = Array.isArray(users) ? users[0] : users;\n    if (!user) return null;\n\n    return {\n      id: user.fid.toString(),\n      platform: \"farcaster\",\n      username: user.username,\n      displayName: user.display_name,\n      bio: user.profile?.bio?.text,\n      followers: user.follower_count,\n      following: user.following_count,\n      verified: (user.verifications?.length ?? 0) > 0,\n      avatar: user.pfp_url,\n      url: `https://warpcast.com/${user.username}`,\n    };\n  }\n\n  async getUserPosts(fid: string, limit = 50): Promise<SocialPost[]> {\n    const response = await this.fetch<NeynarResponse<FarcasterCast[]>>(\n      `/feed/user/casts?fid=${fid}&limit=${Math.min(limit, 100)}`\n    );\n\n    const casts = response?.result ?? response?.casts ?? [];\n    if (!Array.isArray(casts)) return [];\n\n    return casts.map((cast) => this.mapCast(cast));\n  }\n\n  async postMessage(content: string, options?: PostOptions): Promise<SocialPost | null> {\n    if (!this.signerUuid) {\n      console.error(\"Farcaster signer UUID required for posting\");\n      return null;\n    }\n\n    const response = await this.fetch<{ cast: FarcasterCast }>(\"/cast\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        signer_uuid: this.signerUuid,\n        text: content,\n        parent: options?.replyTo,\n        embeds: options?.media?.map((m) => ({ url: m.url })),\n      }),\n    });\n\n    if (!response?.cast) return null;\n    return this.mapCast(response.cast);\n  }\n\n  async getTrendingCasts(limit = 20): Promise<SocialPost[]> {\n    const response = await this.fetch<NeynarResponse<FarcasterCast[]>>(\n      `/feed/trending?limit=${Math.min(limit, 100)}`\n    );\n\n    const casts = response?.result ?? response?.casts ?? [];\n    if (!Array.isArray(casts)) return [];\n\n    return casts.map((cast) => this.mapCast(cast));\n  }\n\n  async getChannelCasts(channelId: string, limit = 50): Promise<SocialPost[]> {\n    const response = await this.fetch<NeynarResponse<FarcasterCast[]>>(\n      `/feed/channel?channel_id=${channelId}&limit=${Math.min(limit, 100)}`\n    );\n\n    const casts = response?.result ?? response?.casts ?? [];\n    if (!Array.isArray(casts)) return [];\n\n    return casts.map((cast) => this.mapCast(cast));\n  }\n}\n","import type { SocialPost, SentimentAnalysis } from \"../types.js\";\nimport type { LLMClient } from \"@gicm/agent-core\";\n\ninterface SentimentKeyword {\n  word: string;\n  score: number;\n}\n\n// Basic sentiment keywords for crypto/web3\nconst BULLISH_KEYWORDS: SentimentKeyword[] = [\n  { word: \"bullish\", score: 0.8 },\n  { word: \"moon\", score: 0.7 },\n  { word: \"pump\", score: 0.6 },\n  { word: \"ath\", score: 0.6 },\n  { word: \"buy\", score: 0.4 },\n  { word: \"long\", score: 0.5 },\n  { word: \"breakout\", score: 0.6 },\n  { word: \"accumulate\", score: 0.5 },\n  { word: \"undervalued\", score: 0.5 },\n  { word: \"gem\", score: 0.6 },\n  { word: \"wagmi\", score: 0.7 },\n  { word: \"gm\", score: 0.3 },\n  { word: \"lfg\", score: 0.6 },\n  { word: \"alpha\", score: 0.4 },\n];\n\nconst BEARISH_KEYWORDS: SentimentKeyword[] = [\n  { word: \"bearish\", score: -0.8 },\n  { word: \"dump\", score: -0.7 },\n  { word: \"crash\", score: -0.8 },\n  { word: \"sell\", score: -0.4 },\n  { word: \"short\", score: -0.5 },\n  { word: \"scam\", score: -0.9 },\n  { word: \"rug\", score: -0.9 },\n  { word: \"ngmi\", score: -0.6 },\n  { word: \"rekt\", score: -0.7 },\n  { word: \"fud\", score: -0.3 },\n  { word: \"overvalued\", score: -0.5 },\n  { word: \"dead\", score: -0.6 },\n];\n\nexport class SentimentAnalyzer {\n  private llmClient?: LLMClient;\n\n  constructor(llmClient?: LLMClient) {\n    this.llmClient = llmClient;\n  }\n\n  async analyzeSentiment(posts: SocialPost[]): Promise<SentimentAnalysis> {\n    if (posts.length === 0) {\n      return {\n        score: 0,\n        label: \"neutral\",\n        confidence: 0,\n        keywords: [],\n        samplePosts: [],\n      };\n    }\n\n    // Use LLM for more accurate analysis if available\n    if (this.llmClient && posts.length <= 50) {\n      return this.llmAnalysis(posts);\n    }\n\n    // Fallback to keyword-based analysis\n    return this.keywordAnalysis(posts);\n  }\n\n  private async llmAnalysis(posts: SocialPost[]): Promise<SentimentAnalysis> {\n    if (!this.llmClient) {\n      return this.keywordAnalysis(posts);\n    }\n\n    try {\n      const postsText = posts\n        .slice(0, 30)\n        .map((p) => `- ${p.content.slice(0, 200)}`)\n        .join(\"\\n\");\n\n      const response = await this.llmClient.chat([\n        {\n          role: \"system\",\n          content: `Analyze the sentiment of these crypto/web3 social media posts.\nReturn JSON with this exact structure:\n{\n  \"score\": <number from -1 (very bearish) to 1 (very bullish)>,\n  \"label\": \"bullish\" | \"bearish\" | \"neutral\",\n  \"confidence\": <number from 0 to 1>,\n  \"keywords\": [{\"word\": \"string\", \"sentiment\": <number>}]\n}`,\n        },\n        {\n          role: \"user\",\n          content: `Analyze sentiment:\\n\\n${postsText}`,\n        },\n      ]);\n\n      const parsed = JSON.parse(response.content) as {\n        score: number;\n        label: \"bullish\" | \"bearish\" | \"neutral\";\n        confidence: number;\n        keywords: Array<{ word: string; sentiment: number }>;\n      };\n\n      return {\n        score: parsed.score,\n        label: parsed.label,\n        confidence: parsed.confidence,\n        keywords: parsed.keywords,\n        samplePosts: posts.slice(0, 5),\n      };\n    } catch {\n      return this.keywordAnalysis(posts);\n    }\n  }\n\n  private keywordAnalysis(posts: SocialPost[]): SentimentAnalysis {\n    let totalScore = 0;\n    const keywordCounts = new Map<string, { count: number; score: number }>();\n\n    for (const post of posts) {\n      const text = post.content.toLowerCase();\n      let postScore = 0;\n\n      // Check bullish keywords\n      for (const kw of BULLISH_KEYWORDS) {\n        if (text.includes(kw.word)) {\n          postScore += kw.score;\n          const existing = keywordCounts.get(kw.word) ?? { count: 0, score: kw.score };\n          keywordCounts.set(kw.word, { count: existing.count + 1, score: kw.score });\n        }\n      }\n\n      // Check bearish keywords\n      for (const kw of BEARISH_KEYWORDS) {\n        if (text.includes(kw.word)) {\n          postScore += kw.score;\n          const existing = keywordCounts.get(kw.word) ?? { count: 0, score: kw.score };\n          keywordCounts.set(kw.word, { count: existing.count + 1, score: kw.score });\n        }\n      }\n\n      // Weight by engagement\n      const engagementWeight = Math.log10(\n        1 + (post.likes ?? 0) + (post.reposts ?? 0) * 2\n      );\n      totalScore += postScore * (1 + engagementWeight * 0.1);\n    }\n\n    const avgScore = posts.length > 0 ? totalScore / posts.length : 0;\n    const normalizedScore = Math.max(-1, Math.min(1, avgScore));\n\n    const keywords = Array.from(keywordCounts.entries())\n      .map(([word, data]) => ({ word, sentiment: data.score }))\n      .sort((a, b) => Math.abs(b.sentiment) - Math.abs(a.sentiment))\n      .slice(0, 10);\n\n    return {\n      score: normalizedScore,\n      label: normalizedScore > 0.2 ? \"bullish\" : normalizedScore < -0.2 ? \"bearish\" : \"neutral\",\n      confidence: Math.min(0.7, posts.length / 100), // More posts = higher confidence\n      keywords,\n      samplePosts: posts.slice(0, 5),\n    };\n  }\n\n  analyzeByTime(\n    posts: SocialPost[],\n    intervalHours = 1\n  ): Array<{ timestamp: Date; sentiment: number; postCount: number }> {\n    if (posts.length === 0) return [];\n\n    // Sort by timestamp\n    const sorted = [...posts].sort(\n      (a, b) => a.timestamp.getTime() - b.timestamp.getTime()\n    );\n\n    const intervalMs = intervalHours * 60 * 60 * 1000;\n    const buckets = new Map<number, SocialPost[]>();\n\n    for (const post of sorted) {\n      const bucket = Math.floor(post.timestamp.getTime() / intervalMs) * intervalMs;\n      const existing = buckets.get(bucket) ?? [];\n      existing.push(post);\n      buckets.set(bucket, existing);\n    }\n\n    const results: Array<{ timestamp: Date; sentiment: number; postCount: number }> = [];\n\n    for (const [timestamp, bucketPosts] of buckets) {\n      const analysis = this.keywordAnalysis(bucketPosts);\n      results.push({\n        timestamp: new Date(timestamp),\n        sentiment: analysis.score,\n        postCount: bucketPosts.length,\n      });\n    }\n\n    return results.sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n  }\n}\n","import type { SocialUser, SocialPost, Influencer } from \"../types.js\";\n\nexport interface InfluencerMetrics {\n  engagementRate: number;\n  avgLikes: number;\n  avgReposts: number;\n  avgReplies: number;\n  postFrequency: number; // Posts per day\n  peakHours: number[];\n  topTopics: string[];\n}\n\nexport class InfluencerAnalyzer {\n  analyzeInfluencer(user: SocialUser, posts: SocialPost[]): Influencer {\n    const metrics = this.calculateMetrics(posts);\n    const topics = this.extractTopics(posts);\n\n    return {\n      ...user,\n      engagementRate: metrics.engagementRate,\n      avgLikes: metrics.avgLikes,\n      avgReposts: metrics.avgReposts,\n      topics,\n      recentPosts: posts.slice(0, 10),\n    };\n  }\n\n  calculateMetrics(posts: SocialPost[]): InfluencerMetrics {\n    if (posts.length === 0) {\n      return {\n        engagementRate: 0,\n        avgLikes: 0,\n        avgReposts: 0,\n        avgReplies: 0,\n        postFrequency: 0,\n        peakHours: [],\n        topTopics: [],\n      };\n    }\n\n    const totalLikes = posts.reduce((sum, p) => sum + (p.likes ?? 0), 0);\n    const totalReposts = posts.reduce((sum, p) => sum + (p.reposts ?? 0), 0);\n    const totalReplies = posts.reduce((sum, p) => sum + (p.replies ?? 0), 0);\n\n    const avgLikes = totalLikes / posts.length;\n    const avgReposts = totalReposts / posts.length;\n    const avgReplies = totalReplies / posts.length;\n\n    // Calculate post frequency\n    const timestamps = posts.map((p) => p.timestamp.getTime()).sort((a, b) => a - b);\n    const timeSpanDays =\n      timestamps.length > 1\n        ? (timestamps[timestamps.length - 1]! - timestamps[0]!) / (1000 * 60 * 60 * 24)\n        : 1;\n    const postFrequency = posts.length / Math.max(timeSpanDays, 1);\n\n    // Calculate peak hours\n    const hourCounts = new Map<number, number>();\n    for (const post of posts) {\n      const hour = post.timestamp.getHours();\n      hourCounts.set(hour, (hourCounts.get(hour) ?? 0) + 1);\n    }\n    const sortedHours = Array.from(hourCounts.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 3)\n      .map(([hour]) => hour);\n\n    // Engagement rate (simplified - would need follower count for accuracy)\n    const avgEngagement = avgLikes + avgReposts * 2 + avgReplies * 3;\n    const engagementRate = avgEngagement / 100; // Normalize\n\n    return {\n      engagementRate,\n      avgLikes,\n      avgReposts,\n      avgReplies,\n      postFrequency,\n      peakHours: sortedHours,\n      topTopics: this.extractTopics(posts),\n    };\n  }\n\n  extractTopics(posts: SocialPost[]): string[] {\n    const hashtagCounts = new Map<string, number>();\n    const wordCounts = new Map<string, number>();\n\n    // Common words to ignore\n    const stopWords = new Set([\n      \"the\", \"a\", \"an\", \"is\", \"are\", \"was\", \"were\", \"be\", \"been\",\n      \"being\", \"have\", \"has\", \"had\", \"do\", \"does\", \"did\", \"will\",\n      \"would\", \"could\", \"should\", \"may\", \"might\", \"must\", \"shall\",\n      \"can\", \"need\", \"dare\", \"ought\", \"used\", \"to\", \"of\", \"in\",\n      \"for\", \"on\", \"with\", \"at\", \"by\", \"from\", \"as\", \"into\", \"through\",\n      \"during\", \"before\", \"after\", \"above\", \"below\", \"between\", \"under\",\n      \"again\", \"further\", \"then\", \"once\", \"here\", \"there\", \"when\",\n      \"where\", \"why\", \"how\", \"all\", \"each\", \"few\", \"more\", \"most\",\n      \"other\", \"some\", \"such\", \"no\", \"nor\", \"not\", \"only\", \"own\",\n      \"same\", \"so\", \"than\", \"too\", \"very\", \"just\", \"and\", \"but\",\n      \"if\", \"or\", \"because\", \"until\", \"while\", \"this\", \"that\", \"these\",\n      \"those\", \"it\", \"its\", \"i\", \"my\", \"you\", \"your\", \"we\", \"our\", \"they\", \"their\",\n    ]);\n\n    for (const post of posts) {\n      // Count hashtags\n      if (post.hashtags) {\n        for (const tag of post.hashtags) {\n          hashtagCounts.set(tag.toLowerCase(), (hashtagCounts.get(tag.toLowerCase()) ?? 0) + 1);\n        }\n      }\n\n      // Count significant words\n      const words = post.content\n        .toLowerCase()\n        .replace(/[^a-z0-9\\s]/g, \" \")\n        .split(/\\s+/)\n        .filter((w) => w.length > 3 && !stopWords.has(w));\n\n      for (const word of words) {\n        wordCounts.set(word, (wordCounts.get(word) ?? 0) + 1);\n      }\n    }\n\n    // Combine hashtags and frequent words\n    const topics = new Map<string, number>();\n\n    for (const [tag, count] of hashtagCounts) {\n      topics.set(`#${tag}`, count * 2); // Weight hashtags higher\n    }\n\n    for (const [word, count] of wordCounts) {\n      if (count >= 3) {\n        // Only include words that appear multiple times\n        topics.set(word, (topics.get(word) ?? 0) + count);\n      }\n    }\n\n    return Array.from(topics.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([topic]) => topic);\n  }\n\n  rankInfluencers(influencers: Influencer[]): Influencer[] {\n    return [...influencers].sort((a, b) => {\n      // Score based on followers, engagement, and activity\n      const scoreA =\n        a.followers * 0.3 +\n        a.engagementRate * 10000 * 0.4 +\n        a.avgLikes * 0.2 +\n        a.avgReposts * 100 * 0.1;\n\n      const scoreB =\n        b.followers * 0.3 +\n        b.engagementRate * 10000 * 0.4 +\n        b.avgLikes * 0.2 +\n        b.avgReposts * 100 * 0.1;\n\n      return scoreB - scoreA;\n    });\n  }\n\n  findSimilarInfluencers(\n    target: Influencer,\n    candidates: Influencer[]\n  ): Influencer[] {\n    const targetTopics = new Set(target.topics);\n\n    return candidates\n      .filter((c) => c.id !== target.id)\n      .map((candidate) => {\n        const sharedTopics = candidate.topics.filter((t) => targetTopics.has(t));\n        const similarity = sharedTopics.length / Math.max(target.topics.length, 1);\n        return { candidate, similarity };\n      })\n      .filter(({ similarity }) => similarity > 0.2)\n      .sort((a, b) => b.similarity - a.similarity)\n      .map(({ candidate }) => candidate);\n  }\n}\n"],"mappings":"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","names":["z","z"]}