{"version":3,"sources":["../src/types.ts","../src/base-agent.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const ChainType = z.enum([\"evm\", \"solana\"]);\nexport type ChainType = z.infer<typeof ChainType>;\n\nexport const EvmNetwork = z.enum([\n  \"mainnet\",\n  \"base\",\n  \"arbitrum\",\n  \"optimism\",\n  \"polygon\",\n  \"bsc\",\n]);\nexport type EvmNetwork = z.infer<typeof EvmNetwork>;\n\nexport const SolanaNetwork = z.enum([\"mainnet-beta\", \"devnet\", \"testnet\"]);\nexport type SolanaNetwork = z.infer<typeof SolanaNetwork>;\n\nexport const AgentConfigSchema = z.object({\n  name: z.string(),\n  description: z.string().optional(),\n  llmProvider: z.enum([\"openai\", \"anthropic\", \"gemini\"]).default(\"openai\"),\n  llmModel: z.string().optional(),\n  apiKey: z.string().optional(),\n  temperature: z.number().min(0).max(2).default(0.7),\n  maxTokens: z.number().default(4096),\n  verbose: z.boolean().default(false),\n});\nexport type AgentConfig = z.infer<typeof AgentConfigSchema>;\n\nexport const AgentResultSchema = z.object({\n  agent: z.string(),\n  success: z.boolean(),\n  data: z.unknown().optional(),\n  error: z.string().optional(),\n  confidence: z.number().min(0).max(1).optional(),\n  reasoning: z.string().optional(),\n  timestamp: z.number(),\n});\nexport type AgentResult = z.infer<typeof AgentResultSchema>;\n\nexport const TransactionSchema = z.object({\n  hash: z.string(),\n  chain: ChainType,\n  network: z.string(),\n  from: z.string(),\n  to: z.string().optional(),\n  value: z.string().optional(),\n  data: z.string().optional(),\n  status: z.enum([\"pending\", \"confirmed\", \"failed\"]),\n  blockNumber: z.number().optional(),\n  gasUsed: z.string().optional(),\n});\nexport type Transaction = z.infer<typeof TransactionSchema>;\n\nexport const TokenSchema = z.object({\n  address: z.string(),\n  symbol: z.string(),\n  name: z.string(),\n  decimals: z.number(),\n  chain: ChainType,\n  logoURI: z.string().optional(),\n});\nexport type Token = z.infer<typeof TokenSchema>;\n\nexport const WalletBalanceSchema = z.object({\n  address: z.string(),\n  chain: ChainType,\n  nativeBalance: z.string(),\n  tokens: z.array(\n    z.object({\n      token: TokenSchema,\n      balance: z.string(),\n      usdValue: z.number().optional(),\n    })\n  ),\n});\nexport type WalletBalance = z.infer<typeof WalletBalanceSchema>;\n\nexport interface AgentContext {\n  chain: ChainType;\n  network: string;\n  walletAddress?: string;\n  userQuery?: string;\n  previousResults?: AgentResult[];\n  metadata?: Record<string, unknown>;\n  // Action/params pattern for orchestrator commands\n  action?: string;\n  params?: Record<string, unknown>;\n}\n\nexport interface AgentTool {\n  name: string;\n  description: string;\n  parameters: z.ZodType;\n  execute: (params: unknown, context: AgentContext) => Promise<unknown>;\n}\n","import type {\n  AgentConfig,\n  AgentContext,\n  AgentResult,\n  AgentTool,\n} from \"./types.js\";\n\nexport abstract class BaseAgent {\n  protected name: string;\n  protected config: AgentConfig;\n  protected tools: AgentTool[] = [];\n\n  constructor(name: string, config: AgentConfig) {\n    this.name = name;\n    this.config = {\n      ...config,\n      name,\n    };\n  }\n\n  abstract getSystemPrompt(): string;\n\n  abstract analyze(context: AgentContext): Promise<AgentResult>;\n\n  getName(): string {\n    return this.name;\n  }\n\n  getConfig(): AgentConfig {\n    return this.config;\n  }\n\n  getTools(): AgentTool[] {\n    return this.tools;\n  }\n\n  protected registerTool(tool: AgentTool): void {\n    this.tools.push(tool);\n  }\n\n  protected createResult(\n    success: boolean,\n    data?: unknown,\n    error?: string,\n    confidence?: number,\n    reasoning?: string\n  ): AgentResult {\n    return {\n      agent: this.name,\n      success,\n      data,\n      error,\n      confidence,\n      reasoning,\n      timestamp: Date.now(),\n    };\n  }\n\n  protected log(message: string, data?: unknown): void {\n    if (this.config.verbose) {\n      console.log(`[${this.name}] ${message}`, data ?? \"\");\n    }\n  }\n\n  protected parseJSON<T>(response: string): T | null {\n    try {\n      const codeBlockMatch = response.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n      if (codeBlockMatch) {\n        return JSON.parse(codeBlockMatch[1].trim());\n      }\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[0]);\n      }\n      return null;\n    } catch {\n      this.log(\"Failed to parse JSON from response\");\n      return null;\n    }\n  }\n}\n"],"mappings":"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","names":[]}