{"version":3,"sources":["../../src/observability/index.ts"],"sourcesContent":["/**\n * Observability Module (Phase 14)\n *\n * Production-grade observability infrastructure for gICM agents:\n * - OpenTelemetry distributed tracing\n * - Centralized logging with correlation\n * - Metrics registry with Prometheus/OTLP support\n * - SLO tracking and alerting\n *\n * @module observability\n */\n\n// Telemetry (14A)\nexport {\n  TelemetryManager,\n  initializeTelemetry,\n  getTelemetry,\n  shutdownTelemetry,\n  Trace,\n  type TelemetryConfig,\n} from './telemetry.js';\n\n// Log Aggregator (14B)\nexport {\n  LogAggregator,\n  ConsoleTransport,\n  FileTransport,\n  HttpTransport,\n  initializeLogger,\n  getLogger,\n  destroyLogger,\n  type LogLevel,\n  type LogEntry,\n  type LogTransport,\n  type LogAggregatorConfig,\n} from './log-aggregator.js';\n\n// Metrics Registry (14C)\nexport {\n  MetricsRegistry,\n  StandardMetrics,\n  initializeMetrics,\n  getMetricsRegistry,\n  getStandardMetrics,\n  type MetricsConfig,\n  type MetricType,\n  type MetricMetadata,\n} from './metrics-registry.js';\n\n// SLO Manager (14D)\nexport {\n  SLOManager,\n  StandardSLOs,\n  initializeSLOManager,\n  getSLOManager,\n  shutdownSLOManager,\n  type SLO,\n  type SLOStatus,\n  type SLOAlert,\n  type SLOManagerConfig,\n} from './slo-manager.js';\n\n/**\n * Initialize complete observability stack\n *\n * @example\n * ```typescript\n * import { initializeObservability } from '@gicm/agent-core/observability';\n *\n * await initializeObservability({\n *   serviceName: 'wallet-agent',\n *   serviceVersion: '1.0.0',\n *   environment: 'production',\n * });\n * ```\n */\nexport async function initializeObservability(config: {\n  serviceName: string;\n  serviceVersion?: string;\n  environment?: 'development' | 'staging' | 'production';\n  traceEndpoint?: string;\n  metricsEndpoint?: string;\n  enableFileLogging?: boolean;\n  logDirectory?: string;\n}) {\n  // Initialize telemetry\n  const { initializeTelemetry } = await import('./telemetry.js');\n  const telemetry = initializeTelemetry({\n    serviceName: config.serviceName,\n    serviceVersion: config.serviceVersion,\n    environment: config.environment,\n    traceEndpoint: config.traceEndpoint,\n    metricsEndpoint: config.metricsEndpoint,\n  });\n  await telemetry.initialize();\n\n  // Initialize logger\n  const { initializeLogger } = await import('./log-aggregator.js');\n  const logger = initializeLogger({\n    serviceName: config.serviceName,\n    enableFile: config.enableFileLogging ?? false,\n    logDirectory: config.logDirectory,\n    enableConsole: true,\n    minLevel: config.environment === 'production' ? 'info' : 'debug',\n  });\n\n  // Initialize metrics\n  const { initializeMetrics } = await import('./metrics-registry.js');\n  const { registry, standard } = initializeMetrics({\n    serviceName: config.serviceName,\n    prefix: 'gicm',\n  });\n\n  // Initialize SLO manager\n  const { initializeSLOManager, StandardSLOs } = await import('./slo-manager.js');\n  const sloManager = initializeSLOManager({\n    serviceName: config.serviceName,\n    metricsRegistry: registry,\n    logger,\n  });\n\n  // Register standard SLOs\n  sloManager.registerSLO(StandardSLOs.availability(99.9, 3600));\n  sloManager.registerSLO(StandardSLOs.latency(95, 1000, 3600));\n  sloManager.registerSLO(StandardSLOs.errorRate(99.5, 3600));\n\n  // Start SLO monitoring\n  sloManager.start();\n\n  logger.info('Observability stack initialized', {\n    serviceName: config.serviceName,\n    version: config.serviceVersion,\n    environment: config.environment,\n  });\n\n  return {\n    telemetry,\n    logger,\n    registry,\n    standard,\n    sloManager,\n  };\n}\n\n/**\n * Shutdown complete observability stack\n */\nexport async function shutdownObservability() {\n  const { shutdownTelemetry } = await import('./telemetry.js');\n  const { destroyLogger } = await import('./log-aggregator.js');\n  const { shutdownSLOManager } = await import('./slo-manager.js');\n\n  shutdownSLOManager();\n  destroyLogger();\n  await shutdownTelemetry();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA,eAAsB,wBAAwB,QAQ3C;AAED,QAAM,EAAE,qBAAAA,qBAAoB,IAAI,MAAM,OAAO,0BAAgB;AAC7D,QAAM,YAAYA,qBAAoB;AAAA,IACpC,aAAa,OAAO;AAAA,IACpB,gBAAgB,OAAO;AAAA,IACvB,aAAa,OAAO;AAAA,IACpB,eAAe,OAAO;AAAA,IACtB,iBAAiB,OAAO;AAAA,EAC1B,CAAC;AACD,QAAM,UAAU,WAAW;AAG3B,QAAM,EAAE,kBAAAC,kBAAiB,IAAI,MAAM,OAAO,+BAAqB;AAC/D,QAAM,SAASA,kBAAiB;AAAA,IAC9B,aAAa,OAAO;AAAA,IACpB,YAAY,OAAO,qBAAqB;AAAA,IACxC,cAAc,OAAO;AAAA,IACrB,eAAe;AAAA,IACf,UAAU,OAAO,gBAAgB,eAAe,SAAS;AAAA,EAC3D,CAAC;AAGD,QAAM,EAAE,mBAAAC,mBAAkB,IAAI,MAAM,OAAO,iCAAuB;AAClE,QAAM,EAAE,UAAU,SAAS,IAAIA,mBAAkB;AAAA,IAC/C,aAAa,OAAO;AAAA,IACpB,QAAQ;AAAA,EACV,CAAC;AAGD,QAAM,EAAE,sBAAAC,uBAAsB,cAAAC,cAAa,IAAI,MAAM,OAAO,4BAAkB;AAC9E,QAAM,aAAaD,sBAAqB;AAAA,IACtC,aAAa,OAAO;AAAA,IACpB,iBAAiB;AAAA,IACjB;AAAA,EACF,CAAC;AAGD,aAAW,YAAYC,cAAa,aAAa,MAAM,IAAI,CAAC;AAC5D,aAAW,YAAYA,cAAa,QAAQ,IAAI,KAAM,IAAI,CAAC;AAC3D,aAAW,YAAYA,cAAa,UAAU,MAAM,IAAI,CAAC;AAGzD,aAAW,MAAM;AAEjB,SAAO,KAAK,mCAAmC;AAAA,IAC7C,aAAa,OAAO;AAAA,IACpB,SAAS,OAAO;AAAA,IAChB,aAAa,OAAO;AAAA,EACtB,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAKA,eAAsB,wBAAwB;AAC5C,QAAM,EAAE,mBAAAC,mBAAkB,IAAI,MAAM,OAAO,0BAAgB;AAC3D,QAAM,EAAE,eAAAC,eAAc,IAAI,MAAM,OAAO,+BAAqB;AAC5D,QAAM,EAAE,oBAAAC,oBAAmB,IAAI,MAAM,OAAO,4BAAkB;AAE9D,EAAAA,oBAAmB;AACnB,EAAAD,eAAc;AACd,QAAMD,mBAAkB;AAC1B;","names":["initializeTelemetry","initializeLogger","initializeMetrics","initializeSLOManager","StandardSLOs","shutdownTelemetry","destroyLogger","shutdownSLOManager"]}